<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HEP Hub: Post-Rehab Exercise Library and Prescription Platform (Local Storage)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #1f2937; /* Very dark gray/deep charcoal for professional dark theme */
            color: #d1d5db; /* Default light text color */
        }
        /* Custom scrollbar for aesthetics */
        body::-webkit-scrollbar {
            width: 8px;
        }
        body::-webkit-scrollbar-thumb {
            background-color: #374151; /* Darker gray for contrast */
            border-radius: 10px;
        }
        
        .card {
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.25); /* Darker shadow for dark background */
            transition: transform 0.2s, box-shadow 0.2s;
            cursor: grab; /* Indicates draggable */
        }
        .card:hover {
            transform: translateY(-3px);
            box-shadow: 0 16px 25px rgba(6, 182, 212, 0.4); /* Cyan hover glow on dark background */
        }
        .drag-over {
            border: 3px dashed #06b6d4 !important; /* Cyan dashed border on drag over */
            background-color: #1f3248 !important; /* Slightly lighter dark background */
        }

        /* Color-coding classes using the requested palette */
        .strength-border { border-left: 6px solid #1e3a8a; } /* Navy Blue */
        .stretching-border { border-left: 6px solid #ea580c; } /* Orange */
        .balance-border { border-left: 6px solid #0d9488; } /* Teal */
        .functional-border { border-left: 6px solid #4f46e5; } /* Indigo/Functional Accent */
        .motor-control-border { border-left: 6px solid #15803d; } /* Deep Green */

        /* Styles for the draggable Prescription Pad */
        #hepPad {
            transition: all 0.3s ease;
            max-height: calc(100vh - 140px); /* Set max height for sticky area */
            overflow-y: auto;
        }
        #hepPad::-webkit-scrollbar { width: 4px; }
        #hepPad::-webkit-scrollbar-thumb { background-color: #0d9488; border-radius: 4px; }

         /* Custom print styles to hide UI and show the dedicated print content */
        @media print {
            body > *:not(#printView) { /* Hide all direct children of body except the print view */
                display: none !important;
            }
            #printView, #printView * { /* Only show the print view and its contents */
                display: block !important;
            }
            #printView {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
                /* Reset colors and margins for printing */
                padding: 0;
                margin: 0;
                background-color: white;
                color: black;
                box-shadow: none;
                border: none;
            }
            /* Ensure the table prints clearly */
            #printView table {
                border-collapse: collapse;
                width: 100%;
            }
            #printView th, #printView td {
                border: 1px solid #999;
                padding: 10px;
                color: black;
                background-color: white;
            }
            #printView th {
                background-color: #e0e7ff; /* Light blue header for professionalism */
                color: #1e3a8a;
            }
            .print-header h1 {
                color: #1e3a8a !important;
            }
        }
    </style>
</head>
<body class="p-0 sm:p-4 md:p-8">

    <button id="jumpToBottom" class="fixed bottom-6 right-6 p-4 bg-orange-500 text-white rounded-full shadow-lg hover:bg-orange-600 transition-all z-50 transform active:scale-95">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 5v14M19 12l-7 7-7-7"/></svg>
    </button>
    
    <div id="messageBox" class="fixed inset-0 bg-gray-900 bg-opacity-75 hidden z-50 flex items-center justify-center">
        <div class="bg-gray-800 p-6 rounded-xl shadow-2xl max-w-sm w-full border-t-4 border-teal-500">
            <h4 id="messageTitle" class="text-xl font-bold text-teal-400 mb-3"></h4>
            <p id="messageBody" class="text-gray-300 mb-4"></p>
            <button id="messageCloseBtn" class="w-full py-2 bg-teal-600 text-white font-semibold rounded-lg hover:bg-teal-700 transition-colors">Close</button>
        </div>
    </div>


    <div class="max-w-7xl mx-auto">
        
        <header class="sticky top-0 z-40 mb-8 p-6 bg-blue-900 text-white rounded-b-2xl shadow-2xl transition-all">
            <div class="flex flex-col md:flex-row justify-between items-center gap-4">
                <div class="text-center md:text-left">
                    <h1 class="text-4xl sm:text-5xl font-extrabold text-white flex items-center justify-center md:justify-start">
                        <svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8 mr-3 text-teal-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect></svg>
                        HEP Hub
                    </h1>
                    <p class="text-lg sm:text-xl font-medium text-teal-300 mt-1">
                        Post-Rehab Exercise Library and Prescription Platform
                    </p>
                    <p id="authStatus" class="text-xs text-gray-400 mt-1">
                        Status: Using Local Storage (Saving to your browser)
                    </p>
                </div>
                
                <div class="flex space-x-2 p-2 bg-blue-800 rounded-xl">
                    <button id="viewLibraryBtn" class="px-6 py-2 rounded-lg font-semibold text-lg bg-teal-600 text-white hover:bg-teal-700 transition-colors shadow-lg active-tab-class">
                        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 inline mr-2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path></svg>
                        Exercise Library
                    </button>
                    <button id="viewProgramsBtn" class="px-6 py-2 rounded-lg font-semibold text-lg text-gray-300 hover:bg-blue-700 transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 inline mr-2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>
                        Saved Programs
                    </button>
                </div>
                
            </div>
        </header>

        <main class="p-4 sm:p-0">

            <div id="libraryView" class="view-content">
                
                <section class="mb-8 p-6 bg-gray-800 rounded-xl shadow-xl border-t-4 border-teal-500">
                    <h2 class="text-2xl font-bold text-teal-400 mb-6 border-b pb-2 border-gray-700">Exercise Color Key (Drag exercises into the HEP Pad on the right)</h2>
                    
                    <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-6 text-base font-semibold text-gray-100">
                        <div class="flex items-center p-3 rounded-lg bg-gray-900 hover:shadow-lg transition-shadow">
                            <span class="w-4 h-4 rounded-full mr-3 bg-blue-900"></span>
                            Strength Training
                        </div>
                        <div class="flex items-center p-3 rounded-lg bg-gray-900 hover:shadow-lg transition-shadow">
                            <span class="w-4 h-4 rounded-full mr-3 bg-orange-600"></span>
                            Stretching/Flexibility
                        </div>
                        <div class="flex items-center p-3 rounded-lg bg-gray-900 hover:shadow-lg transition-shadow">
                            <span class="w-4 h-4 rounded-full mr-3 bg-teal-600"></span>
                            Balance/Coordination
                        </div>
                        <div class="flex items-center p-3 rounded-lg bg-gray-900 hover:shadow-lg transition-shadow">
                            <span class="w-4 h-4 rounded-full mr-3 bg-indigo-700"></span>
                            Functional Exercise
                        </div>
                        <div class="flex items-center p-3 rounded-lg bg-gray-900 hover:shadow-lg transition-shadow">
                            <span class="w-4 h-4 rounded-full mr-3 bg-green-800"></span>
                            Motor Control
                        </div>
                    </div>
                </section>

                <div class="grid grid-cols-1 xl:grid-cols-3 gap-8">
                    
                    <section class="xl:col-span-2">
                        <div class="mb-8 relative">
                            <svg xmlns="http://www.w3.org/2000/svg" class="absolute left-4 top-1/2 transform -translate-y-1/2 w-6 h-6 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" /></svg>
                            <input id="searchInput" type="text" placeholder="Search by name, injury (e.g., ACL, Low Back), category, or phase..." 
                                class="w-full pl-12 pr-4 py-4 border-2 border-gray-600 rounded-xl shadow-lg focus:outline-none focus:ring-4 focus:ring-teal-400 transition duration-300 text-lg bg-gray-900 text-gray-100 placeholder-gray-400">
                        </div>

                        <h2 class="text-3xl font-extrabold text-gray-100 mb-6 border-b-2 pb-3 border-teal-500">
                            Exercise Library (<span id="exerciseCount"></span> items)
                        </h2>

                        <div id="resultsContainer" class="w-full grid grid-cols-1 md:grid-cols-2 gap-6">
                            </div>

                        <div id="noResults" class="hidden text-center p-12 bg-gray-800 rounded-xl shadow-lg text-gray-400 mt-10">
                            <p class="text-xl font-semibold">No Exercises Match Your Search.</p>
                            <p class="mt-2">Try a different keyword or check the categories in the Color Key above.</p>
                        </div>
                    </section>

                    <aside class="xl:col-span-1 hidden xl:block">
                        <div id="hepPad" 
                            class="sticky top-32 p-6 bg-gray-800 rounded-xl shadow-2xl border-4 border-dashed border-teal-300 flex flex-col items-center justify-start h-[calc(100vh-140px)]"
                            ondragover="handleDragOver(event)" 
                            ondrop="handleDrop(event)"
                            ondragleave="handleDragLeave(event)">
                            
                            <h3 class="text-2xl font-extrabold text-teal-400 mb-4 border-b pb-2 w-full text-center border-gray-700">
                                Current Prescription
                            </h3>

                            <!-- ADDED INPUTS FOR PROGRAM TITLE AND PATIENT NAME -->
                            <div class="w-full space-y-3 mb-6">
                                <input type="text" id="programTitleInput" placeholder="Enter Program Title (e.g., Phase 1: Knee Stability)"
                                       class="w-full px-3 py-2 bg-gray-900 border border-gray-600 rounded-lg text-gray-100 placeholder-gray-500 focus:ring-teal-500 focus:border-teal-500 transition-colors text-base">
                                <input type="text" id="patientNameInput" placeholder="Enter Patient Name (e.g., Alex Johnson)"
                                       class="w-full px-3 py-2 bg-gray-900 border border-gray-600 rounded-lg text-gray-100 placeholder-gray-500 focus:ring-teal-500 focus:border-teal-500 transition-colors text-base">
                            </div>
                            <!-- END ADDED INPUTS -->
                             
                            <div id="hepPadContent" class="w-full space-y-4 overflow-y-auto flex-grow">
                                </div>

                            <p id="hepPadEmptyMessage" class="text-gray-400 text-center mt-8 absolute top-1/2 transform -translate-y-1/2">
                                Drag and drop exercises here to build a custom Home Exercise Program.
                            </p>


                            <button id="prescribeButton" class="w-full mt-4 py-3 bg-teal-600 text-white font-semibold rounded-lg shadow-xl hover:bg-teal-700 transition-colors disabled:opacity-50" disabled>
                                Generate and Save HEP (0 Exercises)
                            </button>

                        </div>
                    </aside>
                </div>
            </div>

            <div id="programsView" class="view-content hidden">
                <h2 class="text-3xl font-extrabold text-gray-100 mb-6 border-b-2 pb-3 border-orange-500">
                    Saved Patient Programs
                </h2>
                <div class="p-6 bg-gray-800 rounded-xl shadow-xl border-t-4 border-orange-500 min-h-64">
                    <p class="text-gray-400 mb-4">Your programs are secured locally in this browser. They are not stored in the cloud.</p>
                    
                    <div id="programsLoading" class="text-center p-12 text-gray-400 hidden">
                        Loading patient data...
                    </div>

                    <div id="programsList" class="space-y-4">
                        </div>

                    <div id="programsEmpty" class="hidden text-center p-12 bg-gray-900 rounded-lg text-gray-400 mt-4">
                        <p class="text-xl font-semibold">No Programs Saved Yet.</p>
                        <p class="mt-2">Switch to the Exercise Library to create your first Home Exercise Program.</p>
                    </div>
                </div>
                
                <div id="detailModal" class="fixed inset-0 bg-gray-900 bg-opacity-75 hidden z-50 flex items-center justify-center p-4">
                    <div class="bg-gray-800 p-8 rounded-xl shadow-2xl max-w-2xl w-full border-t-4 border-orange-500 max-h-[90vh] overflow-y-auto">
                        <h4 id="detailPatientName" class="text-2xl font-bold text-orange-400 mb-4 border-b pb-2 border-gray-700"></h4>
                        <div id="detailProgramExercises" class="space-y-3 mb-6">
                            </div>
                        <button id="detailCloseBtn" class="w-full py-2 bg-teal-600 text-white font-semibold rounded-lg hover:bg-teal-700 transition-colors">Close</button>
                    </div>
                </div>
            </div>
        </main>

        <footer id="footer" class="mt-12 p-6 text-center text-gray-400 text-sm bg-gray-800 rounded-xl shadow-inner">
            <p>&copy; 2024 HEP Hub. Specialized Post-Rehab Exercise Platform.</p>
            <p class="mt-2">Data stored locally in your browser using **LocalStorage**.</p>
        </footer>

    </div>

    <script type="text/javascript">
        // --- LOCAL STORAGE DATA FUNCTIONS ---

        // Key for storing data in LocalStorage
        const LOCAL_STORAGE_KEY = 'hepHUB_patient_programs';
        
        // Array to store programs globally
        let patientPrograms = [];
        
        // Array to store selected exercises for the current prescription
        window.selectedExercises = [];
        

        // --- EXERCISE DATA (COMPLETE) ---
        const exercises = [
            // STRENGTH TRAINING (IDs 1-200) - Navy Blue
            { id: 1, name: "Single-Leg Press (Unloaded)", category: "Strength Training", focus: "Quads, Glutes", injury: "Knee (ACL/MCL)", setsReps: "3x15", phase: "Early-Mid Rehab", description: "Controlled eccentric lowering for neuromuscular control and initial strength building." },
            { id: 2, name: "Rotator Cuff Isometric Holds (Subscap)", category: "Strength Training", focus: "Rotator Cuff", injury: "Shoulder Impingement", setsReps: "3x10s", phase: "Acute/Early Rehab", description: "Gentle co-contraction for stability without movement. Press into wall/door frame." },
            { id: 3, name: "Banded Hip Abduction (Clamshell)", category: "Strength Training", focus: "Glute Medius", injury: "Hip, Low Back", setsReps: "3x20", phase: "Mid Rehab", description: "Focus on isolating the lateral hip stabilizers. Avoid pelvic rotation." },
            { id: 4, name: "Prone Scapular Squeeze (Y/T/W)", category: "Strength Training", focus: "Scapular Stabilizers", injury: "Postural Syndrome", setsReps: "3x10", phase: "Mid Rehab", description: "Strengthening mid-back musculature for improved posture and shoulder mechanics." },
            { id: 5, name: "Split Squat (2-inch lift)", category: "Strength Training", focus: "Lower Body", injury: "Ankle Sprain", setsReps: "3x10/leg", phase: "Late Rehab", description: "Increase depth gradually to challenge range of motion and unilateral leg strength." },
            { id: 6, name: "Eccentric Calf Raises (Slow)", category: "Strength Training", focus: "Calves, Achilles", injury: "Achilles Tendinopathy", setsReps: "3x12", phase: "Late Rehab", description: "Focus on a 4-second lowering phase to rebuild tendon tolerance." },
            { id: 7, name: "Lateral Step-Ups (Box)", category: "Strength Training", focus: "Glutes, Quads", injury: "Knee Pain", setsReps: "3x12/leg", phase: "Mid Rehab", description: "Improves hip strength and frontal plane stability." },
            { id: 8, name: "Dumbbell Row (Neutral Grip)", category: "Strength Training", focus: "Upper Back", injury: "Thoracic Outlet Syndrome", setsReps: "3x10", phase: "Mid Rehab", description: "Strengthens back extensors and retractors to relieve shoulder/neck tension." },
            { id: 9, name: "Weighted Glute Bridge (Hold)", category: "Strength Training", focus: "Glutes, Hamstrings", injury: "Sacroiliac Joint Dysfunction", setsReps: "3x12", phase: "Mid Rehab", description: "Maximal glute contraction at the top; avoid hyperextending the low back." },
            { id: 10, name: "Incline Push-ups (Hands on wall)", category: "Strength Training", focus: "Chest, Shoulders", injury: "Wrist Fracture", setsReps: "3x15", phase: "Early Rehab", description: "Reduces weight-bearing load on the wrist while maintaining chest strength." },
            { id: 11, name: "Hamstring Curls (Banded/Slider)", category: "Strength Training", focus: "Hamstrings", injury: "Hamstring Strain", setsReps: "3x12", phase: "Mid Rehab", description: "Focus on eccentric control. Keep hips stable." },
            { id: 12, name: "Triceps Extension (Band)", category: "Strength Training", focus: "Triceps", injury: "Elbow Tendonitis", setsReps: "3x15", phase: "Early Rehab", description: "Light resistance for tendon loading and strengthening elbow extensors." },
            { id: 13, name: "Supine Chin Tuck with Resistance", category: "Strength Training", focus: "Deep Neck Flexors", injury: "Cervical Sprain", setsReps: "3x10s hold", phase: "Acute/Early Rehab", description: "Strengthening neck stability with light towel resistance." },
            { id: 14, name: "Terminal Knee Extension (TKE)", category: "Strength Training", focus: "VMO", injury: "Patellofemoral Pain", setsReps: "3x20", phase: "Early Rehab", description: "Uses a band around the knee to force contraction of the vastus medialis obliquus." },
            { id: 15, name: "Side Plank (Modified)", category: "Strength Training", focus: "Obliques, Core", injury: "Low Back Instability", setsReps: "3x30s/side", phase: "Mid Rehab", description: "Perform on knees to reduce leverage and build initial side core strength." },
            { id: 16, name: "Quadruped Dumbbell Kickback", category: "Strength Training", focus: "Glutes, Low Back", injury: "Sciatica", setsReps: "3x10/leg", phase: "Mid Rehab", description: "Focus on hip extension without increasing lumbar lordosis." },
            { id: 17, name: "Reverse Fly (Thera-Band)", category: "Strength Training", focus: "Posterior Deltoid", injury: "Shoulder Impingement", setsReps: "3x15", phase: "Mid Rehab", description: "Strengthening antagonist muscles to pull shoulder blades back." },
            { id: 18, name: "Wrist Extension (Light Weight)", category: "Strength Training", focus: "Wrist Extensors", injury: "Lateral Epicondylitis", setsReps: "3x15", phase: "Early Rehab", description: "Slow, controlled movements to load the wrist extensor tendons." },
            { id: 19, name: "Front Foot Elevated Split Squat", category: "Strength Training", focus: "Quads, VMO", injury: "Knee Pain", setsReps: "3x10/leg", phase: "Late Rehab", description: "Increases the demand on the front leg's quad; improves depth." },
            { id: 20, name: "Cable External Rotation (Standing)", category: "Strength Training", focus: "Infraspinatus, Teres Minor", injury: "Rotator Cuff Tear", setsReps: "3x12", phase: "Mid Rehab", description: "Strengthening external rotators for shoulder stability and overhead function." },
            { id: 21, name: "Single-Arm Chest Press (Supine)", category: "Strength Training", focus: "Chest, Core", injury: "Rib Fracture", setsReps: "3x10/arm", phase: "Mid Rehab", description: "Requires core bracing to prevent trunk rotation; use a light dumbbell." },
            { id: 22, name: "Hip Adduction Squeeze (Ball)", category: "Strength Training", focus: "Adductors", injury: "Groin Strain", setsReps: "3x15s hold", phase: "Acute/Early Rehab", description: "Isometric contraction to promote healing and strength in the groin." },
            { id: 23, name: "Wall Slides (Shoulder Flexion)", category: "Strength Training", focus: "Shoulder Flexors", injury: "Frozen Shoulder", setsReps: "3x15", phase: "Early Rehab", description: "Active-assisted range of motion exercise using a frictionless surface." },
            { id: 24, name: "Serratus Punch (Supine)", category: "Strength Training", focus: "Serratus Anterior", injury: "Scapular Winging", setsReps: "3x15", phase: "Mid Rehab", description: "Protracting the shoulder blade against gravity for scapular control." },
            { id: 25, name: "Weighted Carries (Suitcase)", category: "Strength Training", focus: "Lateral Core", injury: "Low Back Stabilization", setsReps: "3x50 steps", phase: "Late Rehab", description: "Anti-lateral flexion drill using a single, heavy weight." },
            { id: 26, name: "Ankle Eversion with Band", category: "Strength Training", focus: "Peroneals", injury: "Ankle Sprain", setsReps: "3x20", phase: "Mid Rehab", description: "Strengthens the primary stabilizers against inversion sprains." },
            { id: 27, name: "Kettlebell Swing (Reduced ROM)", category: "Strength Training", focus: "Hip Hinge, Power", injury: "General Strength", setsReps: "3x10", phase: "Late Rehab/Return to Sport", description: "Focus on hip drive; avoid using the low back." },
            { id: 28, name: "Bicep Curls (Supinated)", category: "Strength Training", focus: "Biceps", injury: "Elbow Fracture", setsReps: "3x12", phase: "Mid Rehab", description: "Controlled flexion with light resistance, monitoring elbow comfort." },
            { id: 29, name: "Psoas March (Supine with Band)", category: "Strength Training", focus: "Hip Flexors, Core", injury: "Hip Flexor Strain", setsReps: "3x20 alternating", phase: "Mid Rehab", description: "Controlled marching motion against light band resistance." },
            { id: 30, name: "Modified Deadlift (Trap Bar)", category: "Strength Training", focus: "Posterior Chain", injury: "Low Back Fusion", setsReps: "3x8", phase: "Advanced Rehab", description: "Allows for a more upright torso position, reducing shear force on the spine." },
            { id: 31, name: "Seated Knee Extension (Unloaded)", category: "Strength Training", focus: "Quadriceps", injury: "Patellofemoral Pain", setsReps: "3x15", phase: "Early Rehab", description: "Focus on full extension and VMO activation without heavy weight." },
            { id: 32, name: "Shoulder External Rotation (Dumbbell)", category: "Strength Training", focus: "Rotator Cuff", injury: "Bicep Tendonitis", setsReps: "3x12", phase: "Mid Rehab", description: "Strengthening the stabilizers with a small dumbbell, elbow tucked." },
            { id: 33, name: "Single-Leg Deadlift (Kettlebell)", category: "Strength Training", focus: "Hamstrings, Balance", injury: "General Strength", setsReps: "3x8/leg", phase: "Late Rehab", description: "Integrates posterior chain strength with unilateral balance." },
            { id: 34, name: "Wall Sits (90-degree)", category: "Strength Training", focus: "Quadriceps", injury: "General Strength", setsReps: "3x60s", phase: "Mid Rehab", description: "Isometric quadriceps endurance building." },
            { id: 35, name: "Resistance Band Chest Press (Standing)", category: "Strength Training", focus: "Pectorals, Shoulders", injury: "Shoulder Instability", setsReps: "3x15", phase: "Mid Rehab", description: "Focus on forward punch motion with stabilization." },
            { id: 36, name: "Copenhagen Adduction (Modified)", category: "Strength Training", focus: "Adductors, Core", injury: "Groin Strain", setsReps: "3x10s hold", phase: "Mid Rehab", description: "Advanced isometric strength for groin and core." },
            { id: 37, name: "Trunk Rotation (Band)", category: "Strength Training", focus: "Obliques, Rotational Core", injury: "Low Back Strain", setsReps: "3x12/side", phase: "Late Rehab", description: "Controlled rotational force with core bracing (Anti-Rotation)." },
            { id: 38, name: "Reverse Lunges (Bodyweight)", category: "Strength Training", focus: "Quads, Glutes", injury: "Knee Osteoarthritis", setsReps: "3x10/leg", phase: "Mid Rehab", description: "Easier on the knee joint than forward lunges; step back smoothly." },
            { id: 39, name: "Trap Raises (Prone)", category: "Strength Training", focus: "Upper Trapezius", injury: "Neck Pain", setsReps: "3x15", phase: "Early Rehab", description: "Shrug motion while lying on stomach." },
            { id: 40, name: "Dumbbell Shrugs (Controlled)", category: "Strength Training", focus: "Upper Trapezius", injury: "General Strength", setsReps: "3x12", phase: "Mid Rehab", description: "Slow, focused elevation and depression of the shoulders." },
            { id: 41, name: "Lateral Arm Raise (Light Weight)", category: "Strength Training", focus: "Deltoids", injury: "Shoulder Impingement", setsReps: "3x15", phase: "Mid Rehab", description: "Controlled abduction, keeping the thumb pointed up." },
            { id: 42, name: "Hollow Body Hold (Modified)", category: "Strength Training", focus: "Global Core", injury: "Low Back Stabilization", setsReps: "3x30s", phase: "Mid Rehab", description: "Keep low back pressed to the floor; bend knees if necessary." },
            { id: 43, name: "Quad Sets (Max Effort)", category: "Strength Training", focus: "Quadriceps", injury: "Post-Op Knee", setsReps: "3x10x10s", phase: "Acute/Early Rehab", description: "Contracting the quad muscle with the knee extended." },
            { id: 44, name: "Ankle Dorsiflexion with Band", category: "Strength Training", focus: "Tibialis Anterior", injury: "Shin Splints", setsReps: "3x20", phase: "Early Rehab", description: "Strengthening the muscle responsible for lifting the foot." },
            { id: 45, name: "Cable Wood Chop (Low to High)", category: "Strength Training", focus: "Rotational Core, Shoulders", injury: "Spinal Stability", setsReps: "3x10/side", phase: "Late Rehab", description: "Power and rotation control exercise." },
            { id: 46, name: "Side-Lying External Rotation (Weight)", category: "Strength Training", focus: "Rotator Cuff", injury: "Shoulder Instability", setsReps: "3x15", phase: "Mid Rehab", description: "Lying on side to isolate the cuff rotators." },
            { id: 47, name: "Mini-Band Squats (Knees Out)", category: "Strength Training", focus: "Glute Medius, Quads", injury: "Knee Valgus", setsReps: "3x15", phase: "Mid Rehab", description: "Use band around knees; focus on pushing knees outward during squat." },
            { id: 48, name: "Seated Hamstring Curl Machine (Light)", category: "Strength Training", focus: "Hamstrings", injury: "General Strength", setsReps: "3x12", phase: "Late Rehab", description: "Gradual introduction of machine resistance." },
            { id: 49, name: "Farmer's Walk (Heavy)", category: "Strength Training", focus: "Grip, Core, Traps", injury: "Neck/Shoulder Stability", setsReps: "3x50m", phase: "Advanced Rehab", description: "Maximal grip endurance and total body stiffness." },
            { id: 50, name: "Single-Arm Overhead Carry", category: "Strength Training", focus: "Shoulder Stability, Core", injury: "Shoulder Impingement", setsReps: "3x25 steps/arm", phase: "Late Rehab", description: "Demanding anti-flexion and shoulder stabilization drill." },
            
            <!-- START NEW STRENGTH EXERCISES (IDs 51-200) -->
            { id: 51, name: "Wall Assisted Squats (High Box)", category: "Strength Training", focus: "Quads, Glutes", injury: "Knee Pain", setsReps: "3x15", phase: "Early Rehab", description: "Control depth and alignment using a wall for light support." },
            { id: 52, name: "Isometric Glute Bridge (1 Leg)", category: "Strength Training", focus: "Glutes, Hamstrings", injury: "Hamstring Strain", setsReps: "3x10s/leg", phase: "Mid Rehab", description: "Maintain hip height with maximum glute contraction; minimal weight shift." },
            { id: 53, name: "Banded Hip Extension (Quadruped)", category: "Strength Training", focus: "Glutes, Low Back", injury: "Low Back Stabilization", setsReps: "3x15/leg", phase: "Mid Rehab", description: "Keep the back flat; focus on lifting the leg using the glute." },
            { id: 54, name: "Dumbbell Pullover (Light)", category: "Strength Training", focus: "Lats, Serratus", injury: "Shoulder Mobility", setsReps: "3x12", phase: "Mid Rehab", description: "Gentle overhead range of motion combined with core and lat engagement." },
            { id: 55, name: "Face Pulls (Band/Cable)", category: "Strength Training", focus: "Posterior Deltoid, Upper Back", injury: "Shoulder Impingement", setsReps: "3x15", phase: "Mid Rehab", description: "Pull band/cable towards the face, focusing on external rotation and scapular retraction." },
            { id: 56, name: "Wrist Flexion (Weight)", category: "Strength Training", focus: "Wrist Flexors", injury: "Medial Epicondylitis", setsReps: "3x15", phase: "Early Rehab", description: "Controlled wrist curl movement, focusing on the eccentric phase." },
            { id: 57, name: "Bird-Dog (With mini-band)", category: "Strength Training", focus: "Core, Low Back Stability", injury: "Low Back Pain", setsReps: "3x10/side", phase: "Early-Mid Rehab", description: "Extend opposite arm and leg while maintaining a neutral spine." },
            { id: 58, name: "Single-Leg Heel Raises (Wall Assist)", category: "Strength Training", focus: "Calves", injury: "Achilles Tendinopathy", setsReps: "3x15/leg", phase: "Mid Rehab", description: "Focus on controlled up and down motion; light touch on wall for balance." },
            { id: 59, name: "Kneeling Pallof Press (Band)", category: "Strength Training", focus: "Anti-Rotation Core", injury: "Low Back Stabilization", setsReps: "3x10s hold/side", phase: "Mid Rehab", description: "Prevent the band from rotating your torso; brace the core strongly." },
            { id: 60, name: "Lateral Band Walk (Squat Stance)", category: "Strength Training", focus: "Glute Medius, Abductors", injury: "Knee Valgus", setsReps: "3x15 steps/side", phase: "Mid Rehab", description: "Maintain tension on the band; keep feet parallel and hips slightly back." },
            { id: 61, name: "VMO Isometrics (Towel under knee)", category: "Strength Training", focus: "VMO", injury: "Patellofemoral Pain", setsReps: "3x15s hold", phase: "Acute/Early Rehab", description: "Press the back of the knee into a towel roll to contract the inner quad." },
            { id: 62, name: "Half-Kneeling Chop (High to Low)", category: "Strength Training", focus: "Rotational Core, Hip Flexors", injury: "Low Back Strain", setsReps: "3x12/side", phase: "Late Rehab", description: "Dynamic rotational movement while stabilizing the pelvis." },
            { id: 63, name: "Incline Dumbbell Bench Press", category: "Strength Training", focus: "Upper Chest, Anterior Deltoid", injury: "General Strength", setsReps: "3x10", phase: "Advanced Rehab", description: "Increases the load on the chest and shoulder compared to flat press." },
            { id: 64, name: "Hamstring Curls (Swiss Ball)", category: "Strength Training", focus: "Hamstrings, Core", injury: "Hamstring Strain", setsReps: "3x15", phase: "Mid Rehab", description: "Requires high level of core and glute stability to perform the curl." },
            { id: 65, name: "Ankle Inversion with Band", category: "Strength Training", focus: "Tibialis Posterior", injury: "Ankle Sprain", setsReps: "3x20", phase: "Mid Rehab", description: "Strengthens the primary stabilizers against eversion sprains." },
            { id: 66, name: "Overhead Squat (Broomstick)", category: "Strength Training", focus: "Total Body Mobility & Stability", injury: "Postural Syndrome", setsReps: "3x10", phase: "Late Rehab", description: "Assesses and improves thoracic, shoulder, hip, and ankle mobility." },
            { id: 67, name: "Band Pull-Aparts (Neutral Grip)", category: "Strength Training", focus: "Scapular Retractors", injury: "Postural Syndrome", setsReps: "3x20", phase: "Mid Rehab", description: "Pull band apart, squeezing the shoulder blades together." },
            { id: 68, name: "Weighted Step-Downs (Slow Eccentric)", category: "Strength Training", focus: "Quads, Knee Control", injury: "Patellofemoral Pain", setsReps: "3x10/leg", phase: "Mid Rehab", description: "Focus on slow, controlled descent; prevent the knee from collapsing inward." },
            { id: 69, name: "Dead Bug (Opposite Arm/Leg)", category: "Strength Training", focus: "Deep Core Stability", injury: "Low Back Stabilization", setsReps: "3x15 alternating", phase: "Early-Mid Rehab", description: "Maintain a flat back against the floor as limbs extend." },
            { id: 70, name: "Single-Arm Row (Kettlebell)", category: "Strength Training", focus: "Upper Back, Lats", injury: "General Strength", setsReps: "3x10/arm", phase: "Mid Rehab", description: "Unilateral strength to address imbalances; brace core to avoid rotation." },
            { id: 71, name: "Lateral Hop and Stick (Single Leg)", category: "Strength Training", focus: "Landing Mechanics, Plyo", injury: "Knee/Ankle", setsReps: "3x10 hops/side", phase: "Advanced Rehab/Return to Sport", description: "Jump sideways and stick the landing without losing balance." },
            { id: 72, name: "Wrist Radial Deviation (Band/Weight)", category: "Strength Training", focus: "Forearm", injury: "Wrist Pain", setsReps: "3x15", phase: "Mid Rehab", description: "Moving the wrist towards the thumb side." },
            { id: 73, name: "Reverse Hyper Extension (Bodyweight)", category: "Strength Training", focus: "Glutes, Low Back", injury: "Spinal Stability", setsReps: "3x15", phase: "Mid Rehab", description: "Lying prone, gently raise legs using glutes and hamstrings." },
            { id: 74, name: "Overhead Triceps Extension (Dumbbell)", category: "Strength Training", focus: "Triceps, Shoulder Stability", injury: "General Strength", setsReps: "3x12", phase: "Late Rehab", description: "Overhead movement challenges shoulder stability and triceps." },
            { id: 75, name: "Box Squats (Controlled)", category: "Strength Training", focus: "Quads, Glutes", injury: "Knee Pain", setsReps: "3x10", phase: "Early-Mid Rehab", description: "A box ensures a consistent depth and allows for a moment of reset." },
            { id: 76, name: "Half-Kneeling Overhead Press (Kettlebell)", category: "Strength Training", focus: "Shoulder, Core", injury: "Shoulder Instability", setsReps: "3x10/arm", phase: "Late Rehab", description: "Stabilizes the pelvis while challenging unilateral overhead strength." },
            { id: 77, name: "Hip Flexor March (Standing with Band)", category: "Strength Training", focus: "Hip Flexors, Core", injury: "Hip Flexor Strain", setsReps: "3x15/leg", phase: "Mid Rehab", description: "Standing upright, lift the knee against band resistance." },
            { id: 78, name: "Single-Arm Landmine Press", category: "Strength Training", focus: "Shoulder, Chest, Core", injury: "Shoulder Impingement", setsReps: "3x10/arm", phase: "Late Rehab", description: "A safer pressing angle than overhead for many shoulder issues." },
            { id: 79, name: "Single-Leg Box Jumps (Low)", category: "Strength Training", focus: "Power, Landing", injury: "Return to Sport", setsReps: "3x8/leg", phase: "Advanced Rehab", description: "Explosive movement focusing on soft landing mechanics." },
            { id: 80, name: "Barbell Rack Pulls (Reduced Range)", category: "Strength Training", focus: "Posterior Chain", injury: "Low Back Strain", setsReps: "3x8", phase: "Advanced Rehab", description: "Heavy loading for the back and glutes while limiting lumbar flexion." },
            { id: 81, name: "Dumbbell Lateral Lunge (Controlled)", category: "Strength Training", focus: "Inner/Outer Thigh, Glutes", injury: "Groin Strain", setsReps: "3x10/leg", phase: "Late Rehab", description: "Strengthens frontal plane movement; control the knee over the foot." },
            { id: 82, name: "Serratus Push-Up Plus", category: "Strength Training", focus: "Serratus Anterior", injury: "Scapular Winging", setsReps: "3x12", phase: "Mid Rehab", description: "Pushing through the shoulder blades at the top of a push-up." },
            { id: 83, name: "Seated Cable Row (Wide Grip)", category: "Strength Training", focus: "Upper Back, Lats", injury: "Postural Syndrome", setsReps: "3x12", phase: "Mid Rehab", description: "Focus on pulling with the back muscles, not just the biceps." },
            { id: 84, name: "Weighted Plank (Plate on Back)", category: "Strength Training", focus: "Global Core", injury: "Low Back Stabilization", setsReps: "3x30s", phase: "Advanced Rehab", description: "Increases the demand for anterior core stiffness." },
            { id: 85, name: "Eccentric Hamstring Slides (Partner Assisted)", category: "Strength Training", focus: "Hamstrings", injury: "Hamstring Strain", setsReps: "3x8", phase: "Advanced Rehab/Return to Sport", description: "Partner holds feet; focus on slow descent using hamstring strength." },
            { id: 86, "name": "Overhead Band Triceps Pressdown", category: "Strength Training", focus: "Triceps", injury: "Elbow Tendonitis", setsReps: "3x15", phase: "Mid Rehab", description: "Isolation exercise for the triceps, working against band resistance." },
            { id: 87, "name": "Supine Ankle Dorsiflexion (Gravity)", category: "Strength Training", focus: "Tibialis Anterior", injury: "Foot Drop", setsReps: "3x30", phase: "Early Rehab", description: "Lifting the foot against gravity in a supine position to activate the shin muscle." },
            { id: 88, "name": "Ab Rollouts (From Knees)", category: "Strength Training", focus: "Global Core, Lats", injury: "Low Back Stability", setsReps: "3x10", phase: "Late Rehab", description: "Maintaining anti-extension of the spine during the roll-out." },
            { id: 89, "name": "Dumbbell Bench Step-Ups", category: "Strength Training", focus: "Quads, Glutes", injury: "Knee Pain", setsReps: "3x10/leg", phase: "Mid Rehab", description: "Controlled step-up motion, focusing on hip drive and knee alignment." },
            { id: 90, "name": "Cable Internal Rotation (Standing)", category: "Strength Training", focus: "Subscapularis", injury: "Rotator Cuff Tear", setsReps: "3x12/arm", phase: "Mid Rehab", description: "Strengthening internal rotators for stability and power." },
            { id: 91, "name": "Swiss Ball Bridge with Leg Curl", category: "Strength Training", focus: "Hamstrings, Glutes, Core", injury: "Posterior Chain", setsReps: "3x12", phase: "Mid Rehab", description: "Combines a hip bridge with dynamic hamstring curling on an unstable surface." },
            { id: 92, "name": "Wrist Ulnar Deviation (Weight)", category: "Strength Training", focus: "Forearm", injury: "Wrist Pain", setsReps: "3x15", phase: "Mid Rehab", description: "Moving the wrist towards the pinky finger side." },
            { id: 93, "name": "Trap Bar Jumps (Light Load)", category: "Strength Training", focus: "Power, Triple Extension", injury: "Return to Sport", setsReps: "3x5", phase: "Advanced Rehab", description: "Low-impact jump training to improve explosive hip drive." },
            { id: 94, "name": "Resisted Neck Rotation (Hand)", category: "Strength Training", focus: "Neck Rotators", injury: "Cervical Instability", setsReps: "3x10/side", phase: "Mid Rehab", description: "Gentle isometric resistance applied by the hand during rotation." },
            { id: 95, "name": "Supine Straight Leg Raise (Controlled)", category: "Strength Training", focus: "Hip Flexors, Core", injury: "Hip Flexor Strain", setsReps: "3x10/leg", phase: "Early-Mid Rehab", description: "Lift leg slowly while keeping the low back flat on the floor." },
            { id: 96, "name": "Seated Band Abduction", category: "Strength Training", focus: "Glute Medius", injury: "Knee Pain", setsReps: "3x20", phase: "Early Rehab", description: "Seated exercise to isolate the lateral hip stabilizers; push knees apart." },
            { id: 97, "name": "Inverted Row (Bodyweight)", category: "Strength Training", focus: "Upper Back, Biceps", injury: "Postural Syndrome", setsReps: "3x max reps", phase: "Mid Rehab", description: "Pulling exercise with adjustable difficulty based on foot placement." },
            { id: 98, "name": "Dumbbell Overhead Shrug", category: "Strength Training", focus: "Upper Trapezius, Stability", injury: "Shoulder Stability", setsReps: "3x12", phase: "Late Rehab", description: "Shrugging the shoulders while holding weight overhead." },
            { id: 99, "name": "Single-Leg Hip Thrust (Bodyweight)", category: "Strength Training", focus: "Glutes, Hamstrings", injury: "Low Back Pain", setsReps: "3x15/leg", phase: "Mid Rehab", description: "Focus on driving the hip up and pausing at the top." },
            { id: 100, "name": "Triceps Dip (Bench/Box)", category: "Strength Training", focus: "Triceps, Chest", injury: "Elbow Pain", setsReps: "3x12", phase: "Late Rehab", description: "Controlled lowering and pressing up; keep elbows close to the body." },
            
            // Additional 100 Strength Exercises (101-200)
            { id: 101, name: "Front Rack Reverse Lunges", category: "Strength Training", focus: "Quads, Core, Hip Stability", injury: "Knee Pain", setsReps: "3x8/leg", phase: "Advanced Rehab", description: "Holds weights near the shoulders, increasing core and balance demand." },
            { id: 102, name: "Banded Push-Up (Full ROM)", category: "Strength Training", focus: "Chest, Shoulders, Triceps", injury: "General Strength", setsReps: "3xMax", phase: "Late Rehab", description: "Band across the back increases resistance, especially at the top." },
            { id: 103, name: "Cable Crossover (High Pulley)", category: "Strength Training", focus: "Pectoralis Minor/Major", injury: "Shoulder Stability", setsReps: "3x12", phase: "Late Rehab", description: "Focus on horizontal adduction to contract the chest." },
            { id: 104, name: "Goblet Squat (Pause at Bottom)", category: "Strength Training", focus: "Quads, Core", injury: "Ankle Mobility", setsReps: "3x10", phase: "Mid Rehab", description: "Weight held close helps maintain an upright torso; focus on depth and pause." },
            { id: 105, name: "Seated Calf Press (Machine)", category: "Strength Training", focus: "Soleus", injury: "Deep Calf Strain", setsReps: "3x15", phase: "Mid Rehab", description: "Targets the soleus muscle with a bent knee position." },
            { id: 106, name: "DB Lateral Raise (Prone on Incline Bench)", category: "Strength Training", focus: "Posterior Deltoid", injury: "Shoulder Impingement", setsReps: "3x15", phase: "Mid Rehab", description: "Isolates the rear deltoid by minimizing upper trap involvement." },
            { id: 107, name: "Single-Arm Cable Row (Kneeling)", category: "Strength Training", focus: "Lats, Obliques", injury: "Spinal Stability", setsReps: "3x12/arm", phase: "Late Rehab", description: "Prevents trunk rotation while pulling; high core demand." },
            { id: 108, name: "Glute March (Standing, Banded)", category: "Strength Training", focus: "Glute Max, Glute Medius", injury: "Hip Instability", setsReps: "3x15/leg", phase: "Mid Rehab", description: "Step up with one leg against resistance, focusing on the stance leg's glute." },
            { id: 109, name: "Rotator Cuff External Rotation (Prone)", category: "Strength Training", focus: "Infraspinatus, Teres Minor", injury: "Rotator Cuff Tear", setsReps: "3x12/arm", phase: "Mid Rehab", description: "Lying on the stomach to fully isolate the external rotators." },
            { id: 110, name: "Reverse Sled Drag", category: "Strength Training", focus: "Quads, Hip Flexors", injury: "Patellar Tendinopathy", setsReps: "3x50m", phase: "Advanced Rehab", description: "Low-impact quad loading; excellent for knee health." },
            { id: 111, name: "Seated Wrist Roller (Forearm Pump)", category: "Strength Training", focus: "Forearm Endurance", injury: "Grip Weakness", setsReps: "3x1 up/down", phase: "Late Rehab", description: "Uses a weight attached to a rope wound onto a bar." },
            { id: 112, name: "Landmine RDL (Single Leg)", category: "Strength Training", focus: "Hamstrings, Glutes, Balance", injury: "Posterior Chain", setsReps: "3x8/leg", phase: "Advanced Rehab", description: "Unilateral posterior chain strength with guidance from the landmine." },
            { id: 113, name: "Side-Lying Hip Abduction (Weighted)", category: "Strength Training", focus: "Glute Medius", injury: "Greater Trochanter Pain", setsReps: "3x15/leg", phase: "Mid Rehab", description: "Lift the top leg straight up, avoiding rotation; use ankle weight." },
            { id: 114, name: "Half-Kneeling Band Triceps Pushdown", category: "Strength Training", focus: "Triceps, Core Stability", injury: "General Strength", setsReps: "3x15", phase: "Mid Rehab", description: "Combines triceps work with half-kneeling pelvic stability." },
            { id: 115, name: "Ankle Dorsiflexion (Seated Against Wall)", category: "Strength Training", focus: "Tibialis Anterior", injury: "Shin Splints", setsReps: "3x15", phase: "Early Rehab", description: "Pushing the feet up against a wall for isometric shin strengthening." },
            { id: 116, name: "Medicine Ball Slams (Low Intensity)", category: "Strength Training", focus: "Core, Power", injury: "Spinal Stability", setsReps: "3x10", phase: "Late Rehab", description: "Controlled full-body power exercise; focus on hip hinge." },
            { id: 117, name: "Dumbbell Pullovers (Straight Arm)", category: "Strength Training", focus: "Lats, Serratus", injury: "Shoulder Mobility", setsReps: "3x12", phase: "Mid Rehab", description: "Works the lats through a full range of overhead motion." },
            { id: 118, name: "Cable Lateral Raises", category: "Strength Training", focus: "Deltoids", injury: "Shoulder Impingement", setsReps: "3x15/arm", phase: "Mid Rehab", description: "Provides constant tension throughout the range of motion." },
            { id: 119, name: "Reverse Plank (On Elbows)", category: "Strength Training", focus: "Posterior Chain, Core", injury: "Postural Syndrome", setsReps: "3x30s", phase: "Mid Rehab", description: "Lifts the hips off the ground, supporting weight on elbows and heels." },
            { id: 120, name: "Band T-Raises (Prone)", category: "Strength Training", focus: "Mid/Lower Trapezius", injury: "Scapular Stability", setsReps: "3x15", phase: "Mid Rehab", description: "Lift arms straight out to the side while lying on stomach." },
            { id: 121, name: "Kneeling Banded Hip Abduction", category: "Strength Training", focus: "Glute Medius, TFL", injury: "IT Band Syndrome", setsReps: "3x20/leg", phase: "Mid Rehab", description: "Use band around knees in a half-kneeling position; push the knee out." },
            { id: 122, name: "Zottman Curls", category: "Strength Training", focus: "Biceps, Forearms", injury: "Elbow Tendonitis", setsReps: "3x10", phase: "Late Rehab", description: "Curl up normally, rotate palms down, and lower slowly (eccentric focus)." },
            { id: 123, name: "L-Sit Progression (Tuck)", category: "Strength Training", focus: "Hip Flexors, Core, Triceps", injury: "General Strength", setsReps: "3x10s hold", phase: "Advanced Rehab", description: "Holding a tucked position to build core strength for the L-Sit." },
            { id: 124, name: "Dumbbell Floor Press (Neutral Grip)", category: "Strength Training", focus: "Chest, Triceps", injury: "Shoulder Impingement", setsReps: "3x12", phase: "Mid Rehab", description: "Limited range of motion reduces stress on the shoulder joint capsule." },
            { id: 125, name: "Seated Band Row (Neutral Grip)", category: "Strength Training", focus: "Mid Back, Lats", injury: "Postural Syndrome", setsReps: "3x15", phase: "Mid Rehab", description: "Pull band towards the lower rib cage; squeeze shoulder blades." },
            { id: 126, name: "Single-Arm Dumbbell Row (Chest Supported)", category: "Strength Training", focus: "Upper Back, Lats", injury: "Low Back Strain", setsReps: "3x10/arm", phase: "Late Rehab", description: "Eliminates low back involvement, isolating the upper body." },
            { id: 127, name: "Overhead Kettlebell March", category: "Strength Training", focus: "Shoulder Stability, Core", injury: "Shoulder Instability", setsReps: "3x10/side", phase: "Late Rehab", description: "Holding weight overhead while marching, demanding core and shoulder control." },
            { id: 128, name: "Eccentric Bicep Curls (Heavy)", category: "Strength Training", focus: "Biceps, Elbow Tendon", injury: "Bicep Tendonitis", setsReps: "3x8", phase: "Late Rehab", description: "Use a heavy weight; focus on a 5-second lowering phase." },
            { id: 129, name: "Towel Bicep Curls (Isometric)", category: "Strength Training", focus: "Biceps", injury: "Acute Elbow Pain", setsReps: "3x15s hold", phase: "Acute/Early Rehab", description: "Pull against a towel with maximal effort for isometric activation." },
            { id: 130, name: "Piston Squat Progression (TRX/Band Assist)", category: "Strength Training", focus: "Unilateral Leg Strength", injury: "Knee (ACL)", setsReps: "3x6/leg", phase: "Advanced Rehab", description: "Deep single-leg squat with support to control depth and form." },
            { id: 131, "name": "Banded Triceps Kickbacks (Slow)", category: "Strength Training", focus: "Triceps", injury: "Elbow Pain", setsReps: "3x15", phase: "Mid Rehab", description: "Focus on controlled extension and pause at the top." },
            { id: 132, "name": "Cable External Rotation (Scapular Plane)", category: "Strength Training", focus: "Rotator Cuff", injury: "Shoulder Impingement", setsReps: "3x12", phase: "Mid Rehab", description: "Performing the movement in the 'scaption' plane (30 degrees from the body)." },
            { id: 133, "name": "Hanging Knee Raise (Tuck)", category: "Strength Training", focus: "Lower Abs, Hip Flexors", injury: "Low Back Stabilization", setsReps: "3x10", phase: "Late Rehab", description: "Pulling knees to chest while hanging; brace core to prevent swing." },
            { id: 134, "name": "Single-Leg Press (Heavy Load)", category: "Strength Training", focus: "Quads, Glutes", injury: "General Strength", setsReps: "3x8/leg", phase: "Advanced Rehab", description: "High-intensity unilateral loading to build mass and power." },
            { id: 135, "name": "Step-Ups with Overhead Load", category: "Strength Training", focus: "Quads, Glutes, Core, Shoulder", injury: "Total Body Stability", setsReps: "3x8/leg", phase: "Late Rehab", description: "Integrates lower body strength with high core and shoulder stabilization." },
            { id: 136, "name": "Quadruped Hip External Rotation (Fire Hydrant)", category: "Strength Training", focus: "Glute Medius", injury: "Hip Instability", setsReps: "3x15/leg", phase: "Mid Rehab", description: "Lifting the knee out to the side while maintaining a square pelvis." },
            { id: 137, "name": "Single-Arm Dumbbell Push Press", category: "Strength Training", focus: "Shoulder, Core, Power", injury: "Return to Sport", setsReps: "3x8/arm", phase: "Advanced Rehab", description: "Uses a slight dip/drive from the legs to press the weight overhead explosively." },
            { id: 138, "name": "Wrist Extension (Eccentric Focus)", category: "Strength Training", focus: "Wrist Extensors, Tendon", injury: "Lateral Epicondylitis", setsReps: "3x10", phase: "Mid Rehab", description: "Use two hands to lift the weight, then lower slowly with one hand (5 seconds)." },
            { id: 139, "name": "Hamstring Bridge (Feet on Wall)", category: "Strength Training", focus: "Hamstrings, Glutes", injury: "Hamstring Strain", setsReps: "3x12", phase: "Mid Rehab", description: "Place feet high on a wall at 90 degrees; push into the wall to lift hips." },
            { id: 140, "name": "Kettlebell Front Squat", category: "Strength Training", focus: "Quads, Core", injury: "General Strength", setsReps: "3x10", phase: "Late Rehab", description: "Excellent for practicing an upright squat pattern and core engagement." },
            { id: 141, "name": "Scapular Depression (Band)", category: "Strength Training", focus: "Lower Trapezius", injury: "Shoulder Impingement", setsReps: "3x15", phase: "Mid Rehab", description: "Pulling the shoulder blades down and back against band resistance." },
            { id: 142, "name": "Reverse Plank March", category: "Strength Training", focus: "Hamstrings, Core Stability", injury: "Low Back Stabilization", setsReps: "3x10/leg", phase: "Late Rehab", description: "Maintaining the reverse plank position while lifting alternating legs." },
            { id: 143, "name": "Tibialis Anterior Raises (Barbell Over Toes)", category: "Strength Training", focus: "Tibialis Anterior", injury: "Shin Splints", setsReps: "3x20", phase: "Late Rehab", description: "Slightly weighted toe-lifts for strong shin muscles." },
            { id: 144, "name": "Turkish Get-Up (Segmented, KB/DB)", category: "Strength Training", focus: "Total Body Stability, Core", injury: "Total Body", setsReps: "3x3/side", phase: "Advanced Rehab", description: "Practice each step slowly to integrate stability and strength." },
            { id: 145, "name": "Banded Lat Pulldown (Kneeling)", category: "Strength Training", focus: "Lats, Upper Back", injury: "Shoulder Mobility", setsReps: "3x15", phase: "Mid Rehab", description: "Kneeling position provides better stability than standing for lat activation." },
            { id: 146, "name": "Landmine Overhead Triceps Extension", category: "Strength Training", focus: "Triceps, Core", injury: "General Strength", setsReps: "3x12", phase: "Late Rehab", description: "Uses the landmine for a fixed path and increased stability during the extension." },
            { id: 147, "name": "Cable Anti-Rotation Press (Standing)", category: "Strength Training", focus: "Obliques, Core", injury: "Spinal Stability", setsReps: "3x12/side", phase: "Mid Rehab", description: "Pressing straight out and resisting the rotational pull of the cable." },
            { id: 148, "name": "Single-Arm Dumbbell Bench Row (Feet Elevated)", category: "Strength Training", focus: "Upper Back, Lats", injury: "General Strength", setsReps: "3x8/arm", phase: "Advanced Rehab", description: "Elevating feet increases resistance and anti-rotation demand." },
            { id: 149, "name": "Lateral Squat (Single Leg Supported)", category: "Strength Training", focus: "VMO, Hip Adductors", injury: "Knee Pain", setsReps: "3x10/leg", phase: "Mid Rehab", description: "Shifting weight laterally to load the inner thigh and inner quad." },
            { id: 150, "name": "Isometric Shoulder Abduction (Wall)", category: "Strength Training", focus: "Deltoids, Rotator Cuff", injury: "Shoulder Impingement", setsReps: "3x15s hold", phase: "Early Rehab", description: "Pressing the elbow/arm into the wall for a static contraction." },
            { id: 151, "name": "Weighted Reverse Lunges (Dumbbells)", category: "Strength Training", focus: "Quads, Glutes", injury: "General Strength", setsReps: "3x10/leg", phase: "Late Rehab", description: "Increases the load while maintaining the knee-friendly reverse lunge pattern." },
            { id: 152, "name": "Hollow Body Rockers (Modified)", category: "Strength Training", focus: "Global Core", injury: "Low Back Stabilization", setsReps: "3x15 reps", phase: "Late Rehab", description: "Gently rocking back and forth while maintaining the hollow body shape." },
            { id: 153, "name": "Band Internal Rotation (Side-Lying)", category: "Strength Training", focus: "Subscapularis", injury: "Rotator Cuff Tear", setsReps: "3x15/arm", phase: "Mid Rehab", description: "Isolating the internal rotators while lying on the uninjured side." },
            { id: 154, "name": "Barbell Hip Thrust (Glute Focused)", category: "Strength Training", focus: "Glutes, Hamstrings", injury: "Low Back Strain", setsReps: "3x10", phase: "Advanced Rehab", description: "Heavy hip extension; focus on full glute contraction at the top." },
            { id: 155, "name": "Band Face Pulls (High Rep)", category: "Strength Training", focus: "Posterior Chain Endurance", injury: "Postural Syndrome", setsReps: "3x25", phase: "Mid Rehab", description: "Focus on volume and endurance for daily posture correction." },
            { id: 156, "name": "Kettlebell Halo (Controlled)", category: "Strength Training", focus: "Shoulder Mobility, Core", injury: "Cervical/Shoulder Stiffness", setsReps: "3x10/direction", phase: "Mid Rehab", description: "Moving the kettlebell around the head in a controlled, stable manner." },
            { id: 157, "name": "Single-Leg Toe Taps (Bench)", category: "Strength Training", focus: "Quads, Hip Flexors, Balance", injury: "Early Return to Sport", setsReps: "3x20/leg", phase: "Late Rehab", description: "Quick, controlled toe taps on a low object while balancing on one leg." },
            { id: 158, "name": "Serratus Anterior Dips (Parallel Bars)", category: "Strength Training", focus: "Serratus Anterior", injury: "Scapular Winging", setsReps: "3x10", phase: "Late Rehab", description: "Pushing the body up from the shoulders, emphasizing protraction." },
            { id: 159, "name": "Weighted Glute Bridge (Band Abduction)", category: "Strength Training", focus: "Glutes (Max/Medius)", injury: "Hip Instability", setsReps: "3x12", phase: "Mid Rehab", description: "Combines bridge with constant band tension to fire the glute medius." },
            { id: 160, "name": "Swiss Ball Wall Squats", category: "Strength Training", focus: "Quads, Core", injury: "Knee Pain", setsReps: "3x15", phase: "Early-Mid Rehab", description: "Ball provides low-friction support, helping to maintain an upright posture." },
            { id: 161, "name": "Dumbbell Shrug (Pause at Top)", category: "Strength Training", focus: "Upper Trapezius", injury: "Neck/Shoulder Stability", setsReps: "3x12", phase: "Mid Rehab", description: "Focus on a 2-second hold at the peak of the shrug." },
            { id: 162, "name": "Single-Arm Dumbbell Carry (Overhead)", category: "Strength Training", focus: "Shoulder Stability, Anti-Lateral Flexion", injury: "Total Body Stability", setsReps: "3x25m/arm", phase: "Advanced Rehab", description: "Highly demanding core and shoulder stability drill." },
            { id: 163, "name": "Ankle Plantarflexion with Band (Seated)", category: "Strength Training", focus: "Calves", injury: "Post-Op Ankle", setsReps: "3x20", phase: "Early Rehab", description: "Pushing the foot down against band resistance." },
            { id: 164, "name": "Reverse Nordic Curls (Assisted)", category: "Strength Training", focus: "Quads, Knee Tendon", injury: "Patellar Tendinopathy", setsReps: "3x8", phase: "Late Rehab", description: "Focus on controlled lowering (eccentric) of the quads; use a band or support." },
            { id: 165, "name": "Side Plank Hip Dips", category: "Strength Training", focus: "Obliques, Core", injury: "Low Back Stabilization", setsReps: "3x15/side", phase: "Late Rehab", description: "Adds dynamic motion to the side plank to increase oblique work." },
            { id: 166, "name": "Cable Face Pulls (Internal Rotation)", category: "Strength Training", focus: "Subscapularis, Anterior Shoulder", injury: "Internal Rotator Strength", setsReps: "3x12", phase: "Mid Rehab", description: "Pulling towards the body and finishing with an internal rotation twist." },
            { id: 167, "name": "Dumbbell Romanian Deadlift (RDL)", category: "Strength Training", focus: "Hamstrings, Glutes", injury: "Posterior Chain", setsReps: "3x10", phase: "Late Rehab", description: "Focus on the hip hinge and posterior chain stretch; maintain a slight knee bend." },
            { id: 168, "name": "Single-Leg Calf Raises (Stairs, Full ROM)", category: "Strength Training", focus: "Calves, Achilles", injury: "Achilles Tendinopathy", setsReps: "3x12/leg", phase: "Late Rehab", description: "Maximal range of motion, emphasizing the bottom stretch and top squeeze." },
            { id: 169, "name": "Single-Arm Dumbbell Push-Up (Feet Wide)", category: "Strength Training", focus: "Chest, Core Stability", injury: "Advanced Strength", setsReps: "3xMax/arm", phase: "Advanced Rehab", description: "High stability challenge, requiring strong core anti-rotation." },
            { id: 170, "name": "Hollow Rockers", category: "Strength Training", focus: "Global Core Endurance", injury: "General Strength", setsReps: "3x15 reps", phase: "Advanced Rehab", description: "Continuous rocking motion while maintaining strict hollow body shape." },
            { id: 171, "name": "Cable Triceps Pushdown (Rope)", category: "Strength Training", focus: "Triceps", injury: "Elbow Pain", setsReps: "3x15", phase: "Mid Rehab", description: "Allows for a final twist to target all three heads of the triceps." },
            { id: 172, "name": "Dumbbell Shrug (Incline Bench)", category: "Strength Training", focus: "Middle Trapezius", injury: "Postural Syndrome", setsReps: "3x15", phase: "Mid Rehab", description: "Lying prone on an incline bench to isolate the mid-back traps." },
            { id: 173, "name": "Ankle Dorsiflexion/Eversion (Combined)", category: "Strength Training", focus: "Peroneals, Tibialis Anterior", injury: "Ankle Sprain Prevention", setsReps: "3x20", phase: "Mid Rehab", description: "Combining the two movements against band resistance." },
            { id: 174, "name": "Cable Bicep Curls (Seated)", category: "Strength Training", focus: "Biceps", injury: "Elbow Pain", setsReps: "3x12", phase: "Mid Rehab", description: "Seated position isolates the bicep by removing lower body movement." },
            { id: 175, "name": "Landmine Side-to-Side Press", category: "Strength Training", focus: "Chest, Shoulders, Core Rotation", injury: "Rotational Power", setsReps: "3x10/side", phase: "Late Rehab", description: "Pressing the landmine across the body for rotational strength." },
            { id: 176, "name": "Split Squat (Heavier Load)", category: "Strength Training", focus: "Quads, Glutes", injury: "General Strength", setsReps: "3x8/leg", phase: "Late Rehab", description: "Increased weight to build significant unilateral leg strength." },
            { id: 177, "name": "Single-Arm Dumbbell Overhead Squat (Light)", category: "Strength Training", focus: "Total Body Stability", injury: "Advanced Stability", setsReps: "3x5/arm", phase: "Advanced Rehab", description: "Requires intense stabilization from shoulder to core to hip." },
            { id: 178, "name": "Reverse Hyperextension (Weighted)", category: "Strength Training", focus: "Glutes, Low Back", injury: "Spinal Stability", setsReps: "3x12", phase: "Advanced Rehab", description: "Adds resistance to the standard reverse hyperextension." },
            { id: 179, "name": "Glute Medius Kickbacks (Band at Ankles)", category: "Strength Training", focus: "Glute Medius", injury: "Hip Stabilization", setsReps: "3x20/leg", phase: "Mid Rehab", description: "Standing, kick leg diagonally back and out against band tension." },
            { id: 180, "name": "Isometric Pec Fly (Ball Squeeze)", category: "Strength Training", focus: "Pectorals", injury: "Acute Shoulder/Rib", setsReps: "3x15s hold", phase: "Acute/Early Rehab", description: "Squeezing a ball or towel between hands for a gentle chest contraction." },
            { id: 181, "name": "V-Ups (Modified)", category: "Strength Training", focus: "Global Core", injury: "Low Back Strain", setsReps: "3x12", phase: "Late Rehab", description: "Lifting torso and legs slightly, meeting in the middle (pike crunch)." },
            { id: 182, "name": "Weighted Step-Ups (High Box)", category: "Strength Training", focus: "Quads, Glutes", injury: "General Strength", setsReps: "3x8/leg", phase: "Advanced Rehab", description: "Increases range of motion and difficulty with added weight." },
            { id: 183, "name": "Cable Hip Adduction (Standing)", category: "Strength Training", focus: "Adductors", injury: "Groin Strain", setsReps: "3x15/leg", phase: "Late Rehab", description: "Pulling the leg across the body against cable resistance." },
            { id: 184, "name": "Single-Arm Overhead Press (Dumbbell)", category: "Strength Training", focus: "Shoulder, Core", injury: "Shoulder Impingement", setsReps: "3x10/arm", phase: "Late Rehab", description: "Requires unilateral strength and strong core bracing." },
            { id: 185, "name": "Front Foot Elevated RDL (Dumbbell)", category: "Strength Training", focus: "Hamstrings, Glutes", injury: "Hamstring Strain", setsReps: "3x8/leg", phase: "Late Rehab", description: "Increases the stretch and range of motion for the hamstring." },
            { id: 186, "name": "Copenhagen Plank (Full)", category: "Strength Training", focus: "Adductors, Core", injury: "Groin Strain", setsReps: "3x30s/side", phase: "Advanced Rehab", description: "Full-leverage side plank on the elbow, highly demanding for the adductors." },
            { id: 187, "name": "Sled Push (Heavy)", category: "Strength Training", focus: "Quads, Glutes, Calves", injury: "Return to Sport", setsReps: "3x20m", phase: "Advanced Rehab", description: "High-intensity, low-impact full leg drive." },
            { id: 188, "name": "Dumbbell Pullover (Serratus Focus)", category: "Strength Training", focus: "Serratus Anterior", injury: "Scapular Stability", setsReps: "3x12", phase: "Mid Rehab", description: "Punch the dumbbell towards the ceiling at the end of the movement." },
            { id: 189, "name": "Single-Leg Calf Raises (Bent Knee)", category: "Strength Training", focus: "Soleus", injury: "Deep Calf Strain", setsReps: "3x15/leg", phase: "Mid Rehab", description: "Bent knee position isolates the soleus muscle." },
            { id: 190, "name": "Weighted Step-Ups (Barbell)", category: "Strength Training", focus: "Quads, Glutes", injury: "General Strength", setsReps: "3x6/leg", phase: "Advanced Rehab", description: "Maximal strength building using heavy barbell loading." },
            { id: 191, "name": "Resisted Neck Side Flexion (Hand)", category: "Strength Training", focus: "Neck Side Flexors", injury: "Neck Stability", setsReps: "3x10/side", phase: "Mid Rehab", description: "Gentle isometric resistance applied by the hand during side bending." },
            { id: 192, "name": "Towel Wrist Curl (Isometric)", category: "Strength Training", focus: "Forearm Flexors", injury: "Acute Elbow Pain", setsReps: "3x15s hold", phase: "Acute/Early Rehab", description: "Squeeze a towel with max effort while wrist is slightly curled." },
            { id: 193, "name": "Cable Bicep Curls (Incline Bench)", category: "Strength Training", focus: "Biceps (Long Head)", injury: "General Strength", setsReps: "3x10", phase: "Late Rehab", description: "Incline position stretches the long head of the bicep for peak contraction." },
            { id: 194, "name": "Glute Bridge (Foot Elevated)", category: "Strength Training", focus: "Hamstrings, Glutes", injury: "Posterior Chain", setsReps: "3x15", phase: "Mid Rehab", description: "Elevating the feet increases the range of motion and hamstring demand." },
            { id: 195, "name": "Single-Arm Dumbbell Push Press (Heavy)", category: "Strength Training", focus: "Shoulder, Core, Power", injury: "Return to Sport", setsReps: "3x5/arm", phase: "Advanced Rehab", description: "Maximal explosive strength training for overhead power." },
            { id: 196, "name": "Trap Bar Deadlift (Heavy)", category: "Strength Training", focus: "Quads, Glutes, Low Back", injury: "General Strength", setsReps: "3x5", phase: "Advanced Rehab", description: "High-load compound movement for total lower body strength." },
            { id: 197, "name": "Hollow Body Hold (Long Duration)", category: "Strength Training", focus: "Global Core Endurance", injury: "General Strength", setsReps: "3x60s", phase: "Advanced Rehab", description: "Maximal isometric hold for core stability and endurance." },
            { id: 198, "name": "Landmine Sumo Squat", category: "Strength Training", focus: "Adductors, Glutes, Quads", injury: "Hip/Groin Strength", setsReps: "3x12", phase: "Late Rehab", description: "Wide stance squat targeting the inner thigh muscles." },
            { id: 199, "name": "Cable Wood Chop (High to Low)", category: "Strength Training", focus: "Rotational Core, Lats", injury: "Rotational Power", setsReps: "3x10/side", phase: "Advanced Rehab", description: "Explosive rotational exercise for core and upper body power." },
            { id: 200, "name": "Single-Leg RDL (Dumbbell, Heavy)", category: "Strength Training", focus: "Hamstrings, Glutes, Balance", injury: "General Strength", setsReps: "3x6/leg", phase: "Advanced Rehab", description: "Heavy unilateral posterior chain work for maximum strength gains." },

            // STRETCHING/FLEXIBILITY (IDs 201-400) - Orange
            { id: 201, name: "Supine Hamstring Stretch (Strap)", category: "Stretching/Flexibility", focus: "Hamstrings", injury: "Low Back Pain", setsReps: "3x30s", phase: "Early Rehab", description: "Gentle pull to the point of tension; keep knee slightly bent." },
            { id: 202, name: "Pectoralis Major Wall Stretch", category: "Stretching/Flexibility", focus: "Chest", injury: "Shoulder Impingement", setsReps: "3x45s", phase: "Mid Rehab", description: "Hand on wall, rotate body away to feel stretch in the front of the shoulder/chest." },
            { id: 203, name: "Figure-4 Stretch (Supine)", category: "Stretching/Flexibility", focus: "Glutes, Piriformis", injury: "Sciatica", setsReps: "3x30s/side", phase: "Early-Mid Rehab", description: "Relieves pressure on the sciatic nerve by stretching the deep hip rotators." },
            { id: 204, name: "Ankle Dorsiflexion Stretch (Wall)", category: "Stretching/Flexibility", focus: "Ankle Mobility", injury: "Ankle Sprain", setsReps: "3x15s/side", phase: "Mid Rehab", description: "Improves ability to pull the toes up, important for walking and squatting." },
            { id: 205, name: "Cat-Cow (Dynamic Lumbar Mobility)", category: "Stretching/Flexibility", focus: "Spine", injury: "General Stiffness", setsReps: "3x10 reps", phase: "Early Rehab", description: "Gently mobilizing the spine from flexion to extension." },
            { id: 206, name: "Posterior Shoulder Capsule Stretch", category: "Stretching/Flexibility", focus: "Rear Shoulder", injury: "Rotator Cuff Tear", setsReps: "3x20s/arm", phase: "Mid Rehab", description: "Gently pull the elbow across the chest to stretch the back of the shoulder." },
            { id: 207, name: "Seated Calf Stretch (Towel)", category: "Stretching/Flexibility", focus: "Gastrocnemius", injury: "Plantar Fasciitis", setsReps: "3x30s", phase: "Early Rehab", description: "Pull toes towards you with a towel, keeping the knee straight." },
            { id: 208, name: "Quadriceps Stretch (Standing Hold)", category: "Stretching/Flexibility", focus: "Quads, Hip Flexors", injury: "Knee Pain", setsReps: "3x30s/leg", phase: "Mid Rehab", description: "Pull the ankle towards the buttock; use a wall for balance." },
            { id: 209, name: "Cervical Retraction (Chin Tuck)", category: "Stretching/Flexibility", focus: "Neck", injury: "Tension Headache", setsReps: "3x10 reps", phase: "Acute/Early Rehab", description: "Actively pull the head straight back to stretch the suboccipital muscles." },
            { id: 210, name: "Child's Pose (Thoracic Extension)", category: "Stretching/Flexibility", focus: "Thoracic Spine, Lats", injury: "Postural Syndrome", setsReps: "3x60s", phase: "Early Rehab", description: "Long, gentle stretch for the back and lats." },
            { id: 211, name: "Wrist Flexor Stretch (Palm Up)", category: "Stretching/Flexibility", focus: "Forearm", injury: "Medial Epicondylitis", setsReps: "3x30s/arm", phase: "Early Rehab", description: "Gently pull the fingers back with the elbow straight." },
            { id: 212, name: "Couch Stretch (Knee to Wall)", category: "Stretching/Flexibility", focus: "Hip Flexors, Quads", injury: "Anterior Hip Pain", setsReps: "2x60s/leg", phase: "Mid Rehab", description: "Deep stretch for the hip flexors and rectus femoris." },
            { id: 213, name: "Prayer Stretch (Seated)", category: "Stretching/Flexibility", focus: "Lats, Triceps", injury: "Shoulder Stiffness", setsReps: "3x30s", phase: "Mid Rehab", description: "Hands behind the neck, gently push the elbows back." },
            { id: 214, name: "Seated Trunk Rotation", category: "Stretching/Flexibility", focus: "Spine, Obliques", injury: "Low Back Stiffness", setsReps: "3x15s/side", phase: "Early Rehab", description: "Gentle, active rotation of the upper body while seated." },
            { id: 215, name: "Shoulder Pendulum Swings", category: "Stretching/Flexibility", focus: "Shoulder Range of Motion", injury: "Post-Op Shoulder", setsReps: "3x20 reps", phase: "Acute/Early Rehab", description: "Passive motion to prevent stiffness; use gravity to assist." },
            { id: 216, name: "Deep Squat Hold (Assisted)", category: "Stretching/Flexibility", focus: "Ankles, Hips", injury: "General Mobility", setsReps: "3x30s", phase: "Mid Rehab", description: "Hold onto a pole/door frame for support; work into full ankle/hip range." },
            { id: 217, name: "Neck Lateral Flexion Stretch", category: "Stretching/Flexibility", focus: "Upper Trapezius, Neck", injury: "Whiplash", setsReps: "3x30s/side", phase: "Early Rehab", description: "Gently tilt ear toward shoulder; use light hand assist." },
            { id: 218, name: "Standing T-Spine Extension (Chair)", category: "Stretching/Flexibility", focus: "Thoracic Spine", injury: "Postural Syndrome", setsReps: "3x10 reps", phase: "Mid Rehab", description: "Drape torso over the back of a chair to extend the mid-back." },
            { id: 219, name: "Sartorius Stretch (Butterfly)", category: "Stretching/Flexibility", focus: "Inner Thigh, Groin", injury: "Groin Strain", setsReps: "3x45s", phase: "Mid Rehab", description: "Feet together, gently press knees down." },
            { id: 220, name: "Open Book Stretch (Side-Lying)", category: "Stretching/Flexibility", focus: "Thoracic Rotation", injury: "Low Back Pain", setsReps: "3x10/side", phase: "Early-Mid Rehab", description: "Improves mid-back rotation, taking stress off the lower back." },
            { id: 221, name: "Kneeling Hip Flexor Stretch (Psoas)", category: "Stretching/Flexibility", focus: "Hip Flexors", injury: "Anterior Pelvic Tilt", setsReps: "3x45s/leg", phase: "Mid Rehab", description: "Drive the hip forward while tucking the tailbone for a deeper stretch." },
            { id: 222, name: "Wrist Extension Stretch (Palm Down)", category: "Stretching/Flexibility", focus: "Forearm", injury: "Lateral Epicondylitis", setsReps: "3x30s/arm", phase: "Early Rehab", description: "Gently pull the fingers towards the floor with the elbow straight." },
            { id: 223, name: "Thread the Needle (Shoulder/T-Spine)", category: "Stretching/Flexibility", focus: "Thoracic Rotation, Shoulder", injury: "Shoulder/Back Stiffness", setsReps: "3x30s/side", phase: "Mid Rehab", description: "Reach one arm under the other for a deep mid-back twist." },
            { id: 224, name: "IT Band Stretch (Standing Cross-Over)", category: "Stretching/Flexibility", focus: "IT Band, Glutes", injury: "Knee Tracking Issues", setsReps: "3x30s/side", phase: "Mid Rehab", description: "Cross one leg behind the other and lean to the side." },
            { id: 225, name: "Gastrocnemius (Straight Knee) Wall Stretch", category: "Stretching/Flexibility", focus: "Calf, Achilles", injury: "Calf Strain", setsReps: "3x30s/leg", phase: "Early-Mid Rehab", description: "Heel flat on the floor, back leg straight." },
            { id: 226, name: "Soleus (Bent Knee) Wall Stretch", category: "Stretching/Flexibility", focus: "Deep Calf", injury: "Achilles Tendinopathy", setsReps: "3x30s/leg", phase: "Mid Rehab", description: "Heel flat on the floor, back knee bent." },
            { id: 227, name: "Triceps/Lat Stretch (Overhead)", category: "Stretching/Flexibility", focus: "Triceps, Lats", injury: "Shoulder Mobility", setsReps: "3x30s/side", phase: "Mid Rehab", description: "Reach arm overhead, grab elbow with opposite hand and pull gently." },
            { id: 228, name: "Knees-to-Chest (Double)", category: "Stretching/Flexibility", focus: "Low Back, Glutes", injury: "Low Back Strain", setsReps: "3x45s", phase: "Acute/Early Rehab", description: "Relieves compression on the lumbar spine." },
            { id: 229, name: "Rotator Cuff Sleeper Stretch (Side-Lying)", category: "Stretching/Flexibility", focus: "Posterior Shoulder", injury: "Shoulder Impingement", setsReps: "3x30s/side", phase: "Late Rehab", description: "Aggressive internal rotation stretch; use caution." },
            { id: 230, name: "Downward Dog (Modified)", category: "Stretching/Flexibility", focus: "Hamstrings, Calves, Shoulders", injury: "General Mobility", setsReps: "3x60s", phase: "Mid Rehab", description: "Focus on a straight back; pedal the feet to stretch calves alternately." },
            { id: 231, name: "Prone Hip Extension (Leg Hang)", category: "Stretching/Flexibility", focus: "Hip Flexors", injury: "Anterior Hip Pain", setsReps: "3x60s/leg", phase: "Mid Rehab", description: "Lying on a table, let one leg hang off the side to passively stretch the front of the hip." },
            { id: 232, name: "Shoulder Extension with Stick", category: "Stretching/Flexibility", focus: "Anterior Shoulder, Chest", injury: "Post-Op Shoulder", setsReps: "3x10 reps", phase: "Early Rehab", description: "Use a stick to gently push the arms behind the back." },
            { id: 233, name: "Piriformis Stretch (Seated)", category: "Stretching/Flexibility", focus: "Glutes, Piriformis", injury: "Sciatica", setsReps: "3x30s/side", phase: "Early-Mid Rehab", description: "Cross ankle over opposite knee, lean forward for stretch." },
            { id: 234, name: "Dynamic Psoas Rocking", category: "Stretching/Flexibility", focus: "Hip Flexors", injury: "Psoas Tightness", setsReps: "3x15 reps/side", phase: "Mid Rehab", description: "Rock forward and back gently in a kneeling lunge position." },
            { id: 235, name: "Cervical Rotation (Active)", category: "Stretching/Flexibility", focus: "Neck Range of Motion", injury: "Neck Stiffness", setsReps: "3x10/side", phase: "Early Rehab", description: "Slowly turn head to look over each shoulder." },
            { id: 236, name: "Ankle Alphabet", category: "Stretching/Flexibility", focus: "Ankle Mobility", injury: "Ankle Fracture", setsReps: "3xABC", phase: "Acute/Early Rehab", description: "Trace the alphabet with your foot to restore range of motion." },
            { id: 237, name: "Wall Assisted Pec Minor Stretch", category: "Stretching/Flexibility", focus: "Pec Minor", injury: "Upper Cross Syndrome", setsReps: "3x45s", phase: "Mid Rehab", description: "Lean against a corner to stretch the deep chest muscle." },
            { id: 238, name: "Side Bend (Standing)", category: "Stretching/Flexibility", focus: "Quadratus Lumborum (QL)", injury: "Low Back Pain", setsReps: "3x15s/side", phase: "Early Rehab", description: "Reach one arm overhead and gently lean to the opposite side." },
            { id: 239, name: "Lateral Hip Glide (Band)", category: "Stretching/Flexibility", focus: "Hip Joint Capsule", injury: "Hip Osteoarthritis", setsReps: "3x60s/side", phase: "Mid Rehab", description: "Use a band to pull the femur laterally to distract the joint." },
            { id: 240, name: "Dynamic Knee Circles (Supine)", category: "Stretching/Flexibility", focus: "Hip Range of Motion", injury: "Post-Op Hip", setsReps: "3x10/direction", phase: "Early Rehab", description: "Gently circle the bent knee to improve hip joint motion." },
            { id: 241, name: "Self-Mobilization (Foam Roll Thoracic)", category: "Stretching/Flexibility", focus: "Thoracic Spine", injury: "Postural Syndrome", setsReps: "3x10 rolls", phase: "Mid Rehab", description: "Rolling up and down the mid-back on a foam roller to improve extension." },
            { id: 242, name: "Cervical Extension/Flexion (Active)", category: "Stretching/Flexibility", focus: "Neck Range of Motion", injury: "Neck Stiffness", setsReps: "3x10 reps", phase: "Early Rehab", description: "Slowly nod head up and down." },
            { id: 243, name: "Assisted Calf Pump (Stairs)", category: "Stretching/Flexibility", focus: "Calves", injury: "Achilles Tendinopathy", setsReps: "3x15 reps", phase: "Late Rehab", description: "Standing on a step, slowly lower heels to stretch calves." },
            { id: 244, name: "Overhead Bar Hang (Assisted)", category: "Stretching/Flexibility", focus: "Shoulder Decompression", injury: "Shoulder Pain", setsReps: "3x30s", phase: "Mid Rehab", description: "Use minimal grip strength to hang, decompressing the shoulder joint." },
            { id: 245, name: "Reverse Table Top (Dynamic)", category: "Stretching/Flexibility", focus: "Chest, Shoulders, Triceps", injury: "Postural Syndrome", setsReps: "3x10 reps", phase: "Mid Rehab", description: "A dynamic opening of the chest and front of the shoulders." },
            { id: 246, name: "Forearm Rotation (Active)", category: "Stretching/Flexibility", focus: "Forearm", injury: "Elbow Tendonitis", setsReps: "3x15/direction", phase: "Early Rehab", description: "Slow pronation and supination (turning palm up and down)." },
            { id: 247, name: "Posterior Glide Mobilization (Knee)", category: "Stretching/Flexibility", focus: "Knee Joint", injury: "Post-Op Knee", setsReps: "3x10 reps", phase: "Early Rehab", description: "Self-mobilization using a strap to pull the tibia backward." },
            { id: 248, name: "Seated Low Back Flexion (Round Back)", category: "Stretching/Flexibility", focus: "Low Back", injury: "Low Back Stiffness", setsReps: "3x30s", phase: "Early Rehab", description: "Gently round the lower back while seated to relieve pressure." },
            { id: 249, name: "Seated Upper Trap Stretch (Gently)", category: "Stretching/Flexibility", focus: "Upper Trapezius", injury: "Neck Tension", setsReps: "3x30s/side", phase: "Acute/Early Rehab", description: "Sit on your hand, then gently tilt head away." },
            { id: 250, name: "Side-Lying Gluteal Scoops", category: "Stretching/Flexibility", focus: "Hip Mobility", injury: "Hip Stiffness", setsReps: "3x15 reps/side", phase: "Mid Rehab", description: "Small, controlled arc motion of the top leg to mobilize the hip." },
            
            <!-- START NEW STRETCHING/FLEXIBILITY EXERCISES (IDs 251-400) -->
            { id: 251, name: "PNF Hamstring Stretch (Contract-Relax)", category: "Stretching/Flexibility", focus: "Hamstrings (Deep)", injury: "Chronic Tightness", setsReps: "3x10s hold", phase: "Mid Rehab", description: "Contract the muscle against resistance, then relax into a deeper stretch." },
            { id: 252, name: "Dynamic Knee-to-Chest Rockers", category: "Stretching/Flexibility", focus: "Low Back, Glutes", injury: "Low Back Stiffness", setsReps: "3x15 reps", phase: "Early Rehab", description: "Gently pulling the knees to the chest and releasing rhythmically." },
            { id: 253, name: "Standing TFL/IT Band Stretch (Wall)", category: "Stretching/Flexibility", focus: "TFL, IT Band", injury: "IT Band Syndrome", setsReps: "3x30s/side", phase: "Mid Rehab", description: "Cross the painful leg behind, lean into the wall, and push hips away." },
            { id: 254, name: "Nerve Glide (Median Nerve)", category: "Stretching/Flexibility", focus: "Nerve Mobility", injury: "Carpal Tunnel Syndrome", setsReps: "3x10 reps", phase: "Early Rehab", description: "Gentle movement to floss the median nerve through the wrist/elbow." },
            { id: 255, name: "Wall Angel (Scapular Mobility)", category: "Stretching/Flexibility", focus: "Thoracic, Shoulders", injury: "Postural Syndrome", setsReps: "3x10 reps", phase: "Mid Rehab", description: "Sliding arms up and down a wall, keeping low back and elbows/wrists pressed against it." },
            { id: 256, name: "Spinal Decompression Hang (Assisted)", category: "Stretching/Flexibility", focus: "Spine, Lats", injury: "Low Back Pain", setsReps: "3x30s", phase: "Mid Rehab", description: "Hanging from a bar with feet lightly touching the floor to decompress the spine." },
            { id: 257, name: "Seated Adductor Rock (Dynamic)", category: "Stretching/Flexibility", focus: "Inner Thigh, Groin", injury: "Groin Stiffness", setsReps: "3x15 reps", phase: "Mid Rehab", description: "Sitting with legs wide, gently rocking the torso side-to-side." },
            { id: 258, name: "Levator Scapulae Stretch (Corner)", category: "Stretching/Flexibility", focus: "Neck/Shoulder", injury: "Neck Tension", setsReps: "3x30s/side", phase: "Mid Rehab", description: "Turn head 45 degrees, tuck chin, and gently assist the stretch towards armpit." },
            { id: 259, name: "Hip Flexor Rock with Rotation", category: "Stretching/Flexibility", focus: "Hip Flexors, T-Spine", injury: "Anterior Hip Tightness", setsReps: "3x10 reps/side", phase: "Late Rehab", description: "In a kneeling lunge, rock forward and rotate the torso away from the back leg." },
            { id: 260, name: "Quadruped Thoracic Side Bend", category: "Stretching/Flexibility", focus: "Thoracic Spine, QL", injury: "Mid-Back Stiffness", setsReps: "3x10/side", phase: "Early Rehab", description: "Look over your shoulder toward your hip to side-bend the spine." },
            { id: 261, name: "Dynamic Ankle Pointers (Sitting)", category: "Stretching/Flexibility", focus: "Ankle Mobility", injury: "Ankle Stiffness", setsReps: "3x20 reps", phase: "Early Rehab", description: "Pointing toes up and down rhythmically." },
            { id: 262, name: "Figure-4 Stretch (Standing)", category: "Stretching/Flexibility", focus: "Glutes, Piriformis", injury: "General Mobility", setsReps: "3x30s/side", phase: "Mid Rehab", description: "Cross ankle over knee, sit hips back; use a wall for balance." },
            { id: 263, name: "Wrist Flexor Stretch (Weighted)", category: "Stretching/Flexibility", focus: "Forearm", injury: "Chronic Forearm Tightness", setsReps: "3x30s/arm", phase: "Mid Rehab", description: "Holding a light weight while performing the palm-up wrist stretch." },
            { id: 264, name: "Modified Cobra Pose (Prone Press-Up)", category: "Stretching/Flexibility", focus: "Spine Extension, Abs", injury: "Disc Herniation (Ext Sensitive)", setsReps: "3x10 reps", phase: "Acute/Early Rehab", description: "Press up gently onto elbows/hands to tolerance; only if extension is tolerated." },
            { id: 265, name: "Hip Capsule Stretch (Posterior/Supine)", category: "Stretching/Flexibility", focus: "Hip Joint", injury: "Hip Impingement", setsReps: "3x45s/side", phase: "Late Rehab", description: "Pull knee toward opposite shoulder, then internally rotate the hip." },
            { id: 266, name: "Nerve Glide (Sciatic Nerve)", category: "Stretching/Flexibility", focus: "Nerve Mobility", injury: "Sciatica", setsReps: "3x10 reps/leg", phase: "Early-Mid Rehab", description: "Lying supine, lift leg and gently move ankle up/down to glide the nerve." },
            { id: 267, name: "PNF Calf Stretch (Straight Knee)", category: "Stretching/Flexibility", focus: "Gastrocnemius", injury: "Chronic Calf Tightness", setsReps: "3x10s hold", phase: "Mid Rehab", description: "Push against the wall briefly, then relax into a deeper calf stretch." },
            { id: 268, name: "Wrist Extension Stretch (Weighted)", category: "Stretching/Flexibility", focus: "Forearm", injury: "Chronic Forearm Tightness", setsReps: "3x30s/arm", phase: "Mid Rehab", description: "Holding a light weight while performing the palm-down wrist stretch." },
            { id: 269, name: "Dynamic Single-Leg Hip Circles", category: "Stretching/Flexibility", focus: "Hip Mobility", injury: "Hip Stiffness", setsReps: "3x10/direction", phase: "Mid Rehab", description: "Standing, lift one knee and make large, controlled circles." },
            { id: 270, name: "Seated Thoracic Rotation (Crossed Arms)", category: "Stretching/Flexibility", focus: "Thoracic Spine", injury: "Postural Stiffness", setsReps: "3x15s/side", phase: "Mid Rehab", description: "Sitting with arms crossed, gently rotate the upper back." },
            { id: 271, name: "Dynamic Knee-to-Opposite-Shoulder", category: "Stretching/Flexibility", focus: "Glutes, Hip Rotators", injury: "Low Back/Hip", setsReps: "3x10/side", phase: "Mid Rehab", description: "Pulling the knee across the midline towards the opposite shoulder." },
            { id: 272, name: "Pectoralis Minor Doorway Stretch", category: "Stretching/Flexibility", focus: "Pec Minor", injury: "Upper Cross Syndrome", setsReps: "3x45s", phase: "Mid Rehab", description: "Arms low in the doorway; stepping forward to stretch the small chest muscle." },
            { id: 273, name: "Lizard Pose (Deep Hip Flexor)", category: "Stretching/Flexibility", focus: "Hip Flexors, Groin", injury: "Chronic Hip Tightness", setsReps: "3x60s/leg", phase: "Late Rehab", description: "Deep lunge with hands/forearms on the floor inside the front foot." },
            { id: 274, name: "Self-Mobilization (Foam Roll Glutes)", category: "Stretching/Flexibility", focus: "Glutes, Piriformis", injury: "Sciatica", setsReps: "3x60s/side", phase: "Mid Rehab", description: "Rolling over the glutes/hip on a foam roller to release tight spots." },
            { id: 275, name: "Cervical Retraction with Extension", category: "Stretching/Flexibility", focus: "Neck Mobility", injury: "Neck Stiffness", setsReps: "3x10 reps", phase: "Early Rehab", description: "Perform a chin tuck, then gently extend the neck back (look up)." },
            { id: 276, name: "Dynamic Calf Stretch (Walking Lunge)", category: "Stretching/Flexibility", focus: "Calves, Ankle", injury: "Ankle Mobility", setsReps: "3x10/leg", phase: "Mid Rehab", description: "Rocking forward in a lunge to stretch the calf, keeping the heel down." },
            { id: 277, name: "Nerve Glide (Ulnar Nerve)", category: "Stretching/Flexibility", focus: "Nerve Mobility", injury: "Cubital Tunnel Syndrome", setsReps: "3x10 reps", phase: "Early Rehab", description: "Gentle movement to floss the ulnar nerve (e.g., 'OK' sign near eye)." },
            { id: 278, name: "Standing Hamstring Scoop (Dynamic)", category: "Stretching/Flexibility", focus: "Hamstrings (Dynamic)", injury: "Hamstring Strain", setsReps: "3x15/leg", phase: "Mid Rehab", description: "Gently 'scooping' the ground with the hands while hinging at the hip." },
            { id: 279, name: "Lateral Neck Stretch (Assisted)", category: "Stretching/Flexibility", focus: "Upper Trapezius", injury: "Chronic Neck Tension", setsReps: "3x30s/side", phase: "Mid Rehab", description: "Use one hand to gently pull the head into deeper side flexion." },
            { id: 280, name: "Wall Assisted Hip Internal Rotation", category: "Stretching/Flexibility", focus: "Hip Joint", injury: "Hip Stiffness", setsReps: "3x30s/side", phase: "Mid Rehab", description: "Lying supine with feet on wall, let knees fall inward to stretch." },
            { id: 281, "name": "Dynamic High Knees (Controlled)", category: "Stretching/Flexibility", focus: "Hip Flexors, Quads", injury: "Pre-Activity Warmup", setsReps: "3x20 steps", phase: "Late Rehab/Return to Sport", description: "Bringing knees up high for active mobility." },
            { id: 282, "name": "Dynamic Glute Kicks (Controlled)", category: "Stretching/Flexibility", focus: "Hamstrings, Quads", injury: "Pre-Activity Warmup", setsReps: "3x20 steps", phase: "Late Rehab/Return to Sport", description: "Kicking heels toward glutes for active hamstring range." },
            { id: 283, "name": "Child's Pose (One Arm Extended)", category: "Stretching/Flexibility", focus: "Lats, T-Spine", injury: "Shoulder Stiffness", setsReps: "3x60s/side", phase: "Mid Rehab", description: "Deep stretch into the lat and side of the torso." },
            { id: 284, "name": "PNF Quad Stretch (Prone)", category: "Stretching/Flexibility", focus: "Quadriceps", injury: "Chronic Quad Tightness", setsReps: "3x10s hold/leg", phase: "Mid Rehab", description: "Contract the quad against the hand, then relax into a deeper heel-to-glute stretch." },
            { id: 285, "name": "Ankle Inversion/Eversion (Active Circles)", category: "Stretching/Flexibility", focus: "Ankle Mobility", injury: "Post-Op Ankle", setsReps: "3x10/direction", phase: "Early Rehab", description: "Active circling of the foot, focusing on maximal movement." },
            { id: 286, "name": "Wrist Pronation/Supination (Stick)", category: "Stretching/Flexibility", focus: "Forearm Mobility", injury: "Elbow/Forearm Stiffness", setsReps: "3x15/direction", phase: "Mid Rehab", description: "Holding a stick in the hand and twisting for maximal rotation." },
            { id: 287, "name": "Side-Lying Quad Stretch (Upper Leg)", category: "Stretching/Flexibility", focus: "Quadriceps, Hip Flexors", injury: "Anterior Hip Pain", setsReps: "3x45s/leg", phase: "Mid Rehab", description: "Lying on side, pull top foot back; keep knee in line with body." },
            { id: 288, "name": "Standing Side Bend with Arm Overhead", category: "Stretching/Flexibility", focus: "Obliques, QL, Lats", injury: "Low Back Stiffness", setsReps: "3x30s/side", phase: "Early Rehab", description: "Reaching overhead while leaning to the opposite side for a full side-body stretch." },
            { id: 289, "name": "90/90 Hip Internal Rotation Stretch", category: "Stretching/Flexibility", focus: "Hip Joint (Internal Rot)", injury: "Hip Stiffness", setsReps: "3x45s/side", phase: "Late Rehab", description: "Sitting with both knees bent at 90 degrees; rotating the trunk toward the front knee." },
            { id: 290, "name": "Nerve Glide (Radial Nerve)", category: "Stretching/Flexibility", focus: "Nerve Mobility", injury: "Radial Tunnel Syndrome", setsReps: "3x10 reps", phase: "Early Rehab", description: "Gentle movement to floss the radial nerve (e.g., 'waiter's tip' position)." },
            { id: 291, "name": "Self-Mobilization (Foam Roll Calves)", category: "Stretching/Flexibility", focus: "Calves, Lower Leg", injury: "Calf/Achilles Tightness", setsReps: "3x60s/side", phase: "Mid Rehab", description: "Rolling the entire calf muscle on a foam roller, focusing on trigger points." },
            { id: 292, "name": "Prone T-Spine Extension (Foam Roll)", category: "Stretching/Flexibility", focus: "Thoracic Spine", injury: "Postural Stiffness", setsReps: "3x10 reps", phase: "Mid Rehab", description: "Lying on stomach, lift upper body while pressing mid-back into a foam roller." },
            { id: 293, "name": "Dynamic Leg Swings (Front/Back)", category: "Stretching/Flexibility", focus: "Hip Flexors/Extensors", injury: "Pre-Activity Warmup", setsReps: "3x15/side", phase: "Late Rehab/Return to Sport", description: "Controlled forward and backward leg swings for active hip mobility." },
            { id: 294, "name": "Dynamic Leg Swings (Side-to-Side)", category: "Stretching/Flexibility", focus: "Hip Abductors/Adductors", injury: "Pre-Activity Warmup", setsReps: "3x15/side", phase: "Late Rehab/Return to Sport", description: "Controlled side-to-side leg swings for active hip mobility." },
            { id: 295, "name": "Lying Gluteal Stretch (Ankle Over Knee)", category: "Stretching/Flexibility", focus: "Glutes, Piriformis", injury: "Sciatica", setsReps: "3x45s/side", phase: "Mid Rehab", description: "Deep figure-4 stretch, pulling the knee toward the chest." },
            { id: 296, "name": "Modified Prayer Stretch (Elbows Wide)", category: "Stretching/Flexibility", focus: "Triceps, Shoulders", injury: "Shoulder Stiffness", setsReps: "3x30s", phase: "Mid Rehab", description: "Hands behind neck; push elbows outward to increase the triceps/shoulder stretch." },
            { id: 297, "name": "Nerve Glide (Slump Test Position)", category: "Stretching/Flexibility", focus: "Neural Tension", injury: "Low Back/Sciatica", setsReps: "3x10 reps", phase: "Early-Mid Rehab", description: "Sitting slumped, straighten knee and flex ankle; look up/down." },
            { id: 298, "name": "Neck Rotation (PNF/Contract-Relax)", category: "Stretching/Flexibility", focus: "Neck Rotators", injury: "Chronic Neck Stiffness", setsReps: "3x10s hold/side", phase: "Mid Rehab", description: "Contract into rotation, then relax into a slightly greater range." },
            { id: 299, "name": "Triceps Stretch (Against Wall)", category: "Stretching/Flexibility", focus: "Triceps, Lats", injury: "Elbow/Shoulder Stiffness", setsReps: "3x30s/side", phase: "Mid Rehab", description: "Place forearm on wall/door frame, lean in to stretch the back of the arm." },
            { id: 300, "name": "Dynamic Hip Openers (Standing)", category: "Stretching/Flexibility", focus: "Hip Abductors/External Rotators", injury: "Pre-Activity Warmup", setsReps: "3x10/side", phase: "Late Rehab/Return to Sport", description: "Swinging the knee in a circle (opening the hip joint)." },
            { id: 301, name: "Prone Hip Internal Rotation (Figure 4)", category: "Stretching/Flexibility", focus: "Hip Internal Rotators", injury: "Hip Stiffness", setsReps: "3x30s/side", phase: "Mid Rehab", description: "Lying on stomach, lift knee to 90 degrees and let foot fall outward." },
            { id: 302, name: "Gastrocnemius Stretch (Stair Rail)", category: "Stretching/Flexibility", focus: "Calf, Achilles", injury: "Achilles Tendinopathy", setsReps: "3x45s/leg", phase: "Mid Rehab", description: "Standing on a step with ball of foot, gently drop heel." },
            { id: 303, name: "Quadruped Hip Flexion (Dynamic)", category: "Stretching/Flexibility", focus: "Hip Flexors", injury: "Early Mobility", setsReps: "3x15/leg", phase: "Early Rehab", description: "Rocking the hips back toward the heels to encourage hip flexion." },
            { id: 304, name: "Seated Psoas Stretch (Edge of Chair)", category: "Stretching/Flexibility", focus: "Psoas, Hip Flexors", injury: "Anterior Hip Pain", setsReps: "3x30s/side", phase: "Mid Rehab", description: "Sitting on the edge of a chair, drop one leg back and tuck the pelvis." },
            { id: 305, name: "Standing Forearm Squeeze (Isometric)", category: "Stretching/Flexibility", focus: "Forearm Flexors/Extensors", injury: "Acute Elbow Pain", setsReps: "3x10s hold", phase: "Acute/Early Rehab", description: "Max effort squeezing a ball or object for general forearm tension relief." },
            { id: 306, name: "Shoulder Cross-Body Adduction (Assisted)", category: "Stretching/Flexibility", focus: "Posterior Deltoid", injury: "Shoulder Stiffness", setsReps: "3x30s/side", phase: "Mid Rehab", description: "Pulling the elbow across the body with the opposite hand for a deep rear stretch." },
            { id: 307, name: "Side-Lying Spinal Twist", category: "Stretching/Flexibility", focus: "Low Back, Thoracic", injury: "Low Back Stiffness", setsReps: "3x45s/side", phase: "Mid Rehab", description: "Top knee placed on the ground across the body; rotating the upper body in the opposite direction." },
            { id: 308, name: "Dynamic Pec Stretch (Doorway Walk-Through)", category: "Stretching/Flexibility", focus: "Chest, Shoulders", injury: "Postural Syndrome", setsReps: "3x10 reps", phase: "Mid Rehab", description: "Placing hands in doorway and gently stepping forward and back." },
            { id: 309, name: "Seated Gastroc/Soleus Combo Stretch", category: "Stretching/Flexibility", focus: "Calves", injury: "Ankle Mobility", setsReps: "3x30s", phase: "Mid Rehab", description: "Pulling toes back with a strap, alternating straight and bent knee." },
            { id: 310, name: "Chin Tuck with Overpressure (Gently)", category: "Stretching/Flexibility", focus: "Deep Neck Flexors", injury: "Neck Stiffness", setsReps: "3x10s hold", phase: "Mid Rehab", description: "Performing a chin tuck and using fingers to gently assist the final range." },
            { id: 311, name: "Self-Mobilization (Foam Roll Quads)", category: "Stretching/Flexibility", focus: "Quads, TFL", injury: "Knee Pain", setsReps: "3x60s/side", phase: "Mid Rehab", description: "Rolling over the front of the thigh to release tension." },
            { id: 312, name: "Dynamic Knee Extension (Sitting)", category: "Stretching/Flexibility", focus: "Hamstrings (Dynamic)", injury: "Hamstring Strain", setsReps: "3x15/leg", phase: "Early-Mid Rehab", description: "Sitting, actively straighten the knee until a gentle pull is felt." },
            { id: 313, name: "Butterfly Stretch (Dynamic Pulses)", category: "Stretching/Flexibility", focus: "Inner Thigh, Groin", injury: "Groin Stiffness", setsReps: "3x20 reps", phase: "Mid Rehab", description: "Gently pulsing the knees toward the floor to encourage adductor length." },
            { id: 314, name: "Shoulder Internal Rotation (Stick Behind Back)", category: "Stretching/Flexibility", focus: "Shoulder Internal Rotators", injury: "Shoulder Stiffness", setsReps: "3x30s/side", phase: "Mid Rehab", description: "Holding a stick behind the back and using the opposite arm to pull the arm up." },
            { id: 315, name: "Nerve Glide (Sciatic/Peroneal Nerve Combo)", category: "Stretching/Flexibility", focus: "Neural Tension", injury: "Sciatica", setsReps: "3x10 reps", phase: "Mid Rehab", description: "Combining sciatic nerve glide with ankle eversion/inversion." },
            { id: 316, name: "Ankle Dorsiflexion (Over Box/Step)", category: "Stretching/Flexibility", focus: "Ankle Mobility", injury: "Squatting Issues", setsReps: "3x45s/side", phase: "Late Rehab", description: "Knee forward over the toes, pushing the hip toward the wall." },
            { id: 317, name: "Wrist Extension PNF (Palm Down)", category: "Stretching/Flexibility", focus: "Forearm Extensors", injury: "Lateral Epicondylitis", setsReps: "3x10s hold", phase: "Mid Rehab", description: "Contract the wrist extensors against the stretch, then relax." },
            { id: 318, name: "Triceps/Lat Stretch (Standing Lean)", category: "Stretching/Flexibility", focus: "Triceps, Lats, Obliques", injury: "Shoulder/Back Stiffness", setsReps: "3x30s/side", phase: "Mid Rehab", description: "Reach one arm overhead and lean to the side, grasping a stable object for depth." },
            { id: 319, name: "Modified Pigeon Pose (Supported)", category: "Stretching/Flexibility", focus: "Glutes, Hip Rotators", injury: "Hip/Sciatica", setsReps: "3x60s/side", phase: "Late Rehab", description: "Use a towel or block under the hip for support and controlled depth." },
            { id: 320, name: "Seated Low Back Rotation (Active)", category: "Stretching/Flexibility", focus: "Low Back, Thoracic", injury: "Spinal Stiffness", setsReps: "3x15 reps/side", phase: "Early-Mid Rehab", description: "Active rotation of the spine without pulling with hands." },
            { id: 321, name: "Nerve Glide (Median Nerve, Wrist Flex)", category: "Stretching/Flexibility", focus: "Neural Tension", injury: "Carpal Tunnel", setsReps: "3x10 reps", phase: "Early Rehab", description: "Hand out, palm up, wrist bent, gently move the head side-to-side." },
            { id: 322, name: "Quadruped Rocking (Swaying Hips)", category: "Stretching/Flexibility", focus: "Hip Mobility, Low Back", injury: "General Stiffness", setsReps: "3x60s", phase: "Early Rehab", description: "Gentle swaying of the hips side-to-side in the all-fours position." },
            { id: 323, name: "Dynamic Single-Leg Hamstring Kicks", category: "Stretching/Flexibility", focus: "Hamstrings (Dynamic)", injury: "Pre-Activity Warmup", setsReps: "3x15/leg", phase: "Late Rehab/Return to Sport", description: "Quick, controlled straight-leg kicks forward." },
            { id: 324, name: "Shoulder Flexion (Foam Roller Assist)", category: "Stretching/Flexibility", focus: "Shoulder Range of Motion", injury: "Frozen Shoulder", setsReps: "3x15 reps", phase: "Mid Rehab", description: "Lying supine, roll a foam roller overhead to assist shoulder flexion." },
            { id: 325, name: "Lateral Lunge Stretch (Hold)", category: "Stretching/Flexibility", focus: "Inner Thigh (Adductors)", injury: "Groin Stiffness", setsReps: "3x45s/side", phase: "Mid Rehab", description: "Holding the bottom position of a lateral lunge." },
            { id: 326, name: "Neck Retraction (PNF)", category: "Stretching/Flexibility", focus: "Deep Neck Flexors", injury: "Forward Head Posture", setsReps: "3x10s hold", phase: "Mid Rehab", description: "Pressing the head back against light hand resistance, then relaxing deeper." },
            { id: 327, name: "Self-Mobilization (Foam Roll TFL/Hip Flexor)", category: "Stretching/Flexibility", focus: "Hip Flexors", injury: "Anterior Hip Tightness", setsReps: "3x60s/side", phase: "Mid Rehab", description: "Rolling over the upper outer thigh/front hip area." },
            { id: 328, name: "Dynamic Wall Angel (Small Range)", category: "Stretching/Flexibility", focus: "Scapular Mobility", injury: "Early Shoulder Rehab", setsReps: "3x15 reps", phase: "Early Rehab", description: "Focusing on the movement without forcing the last few degrees of range." },
            { id: 329, name: "Seated Ankle Eversion/Inversion (Active)", category: "Stretching/Flexibility", focus: "Ankle Mobility", injury: "Ankle Stiffness", setsReps: "3x15/direction", phase: "Early Rehab", description: "Actively turning the foot side-to-side with no resistance." },
            { id: 330, name: "Side-Lying Quad Stretch (Bottom Leg)", category: "Stretching/Flexibility", focus: "Hip Flexors", injury: "Anterior Hip Pain", setsReps: "3x45s/leg", phase: "Mid Rehab", description: "Lying on the side, pull the bottom foot back towards the glute." },
            { id: 331, "name": "Dynamic Hip Bridge (Full Range)", category: "Stretching/Flexibility", focus: "Hip Flexor Opening", injury: "Low Back Stiffness", setsReps: "3x15 reps", phase: "Early Rehab", description: "Rhythmically lifting and lowering the hips to mobilize the lower spine and open hips." },
            { id: 332, "name": "Wrist Flexor PNF (Palm Up)", category: "Stretching/Flexibility", focus: "Forearm Flexors", injury: "Medial Epicondylitis", setsReps: "3x10s hold", phase: "Mid Rehab", description: "Contract the wrist flexors against the stretch, then relax." },
            { id: 333, "name": "Modified Frog Stretch (Supported)", category: "Stretching/Flexibility", focus: "Inner Thigh (Deep)", injury: "Groin Stiffness", setsReps: "3x60s", phase: "Late Rehab", description: "Kneeling with legs wide, using hands to control hip depth and rocking." },
            { id: 334, "name": "Nerve Glide (Dynamic Slump)", category: "Stretching/Flexibility", focus: "Neural Tension", injury: "Sciatica", setsReps: "3x15 reps", phase: "Mid Rehab", description: "Alternating knee extension/ankle flexion with head movement for fluid nerve motion." },
            { id: 335, "name": "Shoulder Internal Rotation (Broomstick Assist)", category: "Stretching/Flexibility", focus: "Shoulder Joint", injury: "Shoulder Stiffness", setsReps: "3x30s/side", phase: "Mid Rehab", description: "Holding a stick parallel to the body and rotating the arm internally." },
            { id: 336, "name": "Single-Knee-to-Chest (Opposite Arm Pull)", category: "Stretching/Flexibility", focus: "Glutes, Hip Rotators", injury: "Low Back/Hip", setsReps: "3x45s/side", phase: "Early-Mid Rehab", description: "Pulling one knee across the body toward the opposite shoulder." },
            { id: 337, "name": "Cervical Retraction (Dynamic Reps)", category: "Stretching/Flexibility", focus: "Deep Neck Flexors", injury: "Postural Syndrome", setsReps: "3x15 reps", phase: "Early Rehab", description: "Rhythmically performing the chin tuck motion." },
            { id: 338, "name": "T-Spine Extension/Flexion (Dynamic on Foam Roller)", category: "Stretching/Flexibility", focus: "Thoracic Spine Mobility", injury: "Mid-Back Stiffness", setsReps: "3x10 reps", phase: "Mid Rehab", description: "Rolling up and down the mid-back while dynamically extending and flexing over the roller." },
            { id: 339, "name": "Standing Quadriceps Stretch (Assisted Band)", category: "Stretching/Flexibility", focus: "Quads, Hip Flexors", injury: "Chronic Quad Tightness", setsReps: "3x45s/leg", phase: "Mid Rehab", description: "Using a band around the ankle to pull the heel closer to the glute." },
            { id: 340, "name": "Self-Mobilization (Foam Roll Shins)", category: "Stretching/Flexibility", focus: "Tibialis Anterior", injury: "Shin Splints", setsReps: "3x60s/side", phase: "Mid Rehab", description: "Gentle rolling over the front shin bone muscles." },
            { id: 341, "name": "Pectoralis Minor Corner Stretch (High Arm)", category: "Stretching/Flexibility", focus: "Pec Minor, Anterior Deltoid", injury: "Shoulder Impingement", setsReps: "3x45s", phase: "Mid Rehab", description: "Arms placed high in the doorway (above 90 degrees) to target a different fiber direction." },
            { id: 342, "name": "Seated Hamstring Stretch (Reaching to Toes)", category: "Stretching/Flexibility", focus: "Hamstrings, Low Back", injury: "General Flexibility", setsReps: "3x45s", phase: "Mid Rehab", description: "Sitting with legs straight, reaching forward to the toes." },
            { id: 343, "name": "Cervical Lateral Flexion (PNF)", category: "Stretching/Flexibility", focus: "Neck Side Flexors", injury: "Chronic Neck Stiffness", setsReps: "3x10s hold/side", phase: "Mid Rehab", description: "Contracting the neck muscles against hand resistance, then relaxing deeper." },
            { id: 344, "name": "Dynamic Hip Abduction (Side Lying)", category: "Stretching/Flexibility", focus: "Glute Medius, Outer Thigh", injury: "Hip Mobility", setsReps: "3x15/side", phase: "Early Rehab", description: "Small, controlled leg lifts (not for strength, but for gentle movement)." },
            { id: 345, "name": "Ankle Dorsiflexion (Band Assisted)", category: "Stretching/Flexibility", focus: "Ankle Mobility", injury: "Post-Op Ankle", setsReps: "3x30s/side", phase: "Mid Rehab", description: "Using a band around the ankle to gently pull the joint forward while bending the knee." },
            { id: 346, "name": "Dynamic Cat-Camel", category: "Stretching/Flexibility", focus: "Spine Mobility", injury: "Low Back Stiffness", setsReps: "3x15 reps", phase: "Early Rehab", description: "Fluid movement between spinal flexion (cat) and extension (camel)." },
            { id: 347, "name": "Shoulder External Rotation (Broomstick Assist)", category: "Stretching/Flexibility", focus: "Shoulder Joint", injury: "Shoulder Stiffness", setsReps: "3x30s/side", phase: "Mid Rehab", description: "Holding a stick in one hand and using the other to push the arm into external rotation." },
            { id: 348, "name": "Supine Hip Internal Rotation (Pillow Assist)", category: "Stretching/Flexibility", focus: "Hip Joint (Internal Rot)", injury: "Hip Impingement", setsReps: "3x45s/side", phase: "Late Rehab", description: "Lying on back, use a pillow/block to gently wedge the knee for internal rotation." },
            { id: 349, "name": "Triceps Stretch (Against Bench/Chair)", category: "Stretching/Flexibility", focus: "Triceps, Lats", injury: "Shoulder/Elbow Stiffness", setsReps: "3x45s/side", phase: "Mid Rehab", description: "Kneeling in front of a bench, place elbows on bench and drop head between arms." },
            { id: 350, "name": "Active Pigeon Pose (Dynamic)", category: "Stretching/Flexibility", focus: "Hip Rotators", injury: "Pre-Activity Warmup", setsReps: "3x10 reps/side", phase: "Late Rehab/Return to Sport", description: "Moving in and out of the pigeon pose to actively warm up the hip." },

            // BALANCE/COORDINATION (IDs 351-500) - Teal
            { id: 351, name: "Single Leg Stance (Eyes Open)", category: "Balance/Coordination", focus: "Proprioception", injury: "Ankle Sprain", setsReps: "3x60s/leg", phase: "Mid Rehab", description: "Basic single leg balance; use a stable surface." },
            { id: 352, name: "Tandem Stance (Heel to Toe)", category: "Balance/Coordination", focus: "Static Balance", injury: "General Balance", setsReps: "3x60s", phase: "Early-Mid Rehab", description: "Standing with one foot directly in front of the other." },
            { id: 353, name: "Single Leg Stance (Eyes Closed)", category: "Balance/Coordination", focus: "Proprioception", injury: "Concussion", setsReps: "3x30s/leg", phase: "Late Rehab", description: "Removes visual input to increase reliance on joint and muscle feedback." },
            { id: 354, name: "Single Leg Stance (Dynamic Arm Swings)", category: "Balance/Coordination", focus: "Dynamic Balance", injury: "Shoulder/Hip", setsReps: "3x15 swings/leg", phase: "Late Rehab", description: "Adds an upper body movement to challenge core and hip stability." },
            { id: 355, name: "BOSU Ball Single Leg Balance", category: "Balance/Coordination", focus: "Advanced Proprioception", injury: "Ankle Instability", setsReps: "3x45s/leg", phase: "Advanced Rehab", description: "Standing on an unstable surface to maximally challenge stabilizers." },
            { id: 356, name: "Weight Shifting (Standing)", category: "Balance/Coordination", focus: "Hip Strategy", injury: "General Weakness", setsReps: "3x20 reps/side", phase: "Early Rehab", description: "Controlled shift of weight from one leg to the other." },
            { id: 357, name: "Gaze Stabilization (Standing)", category: "Balance/Coordination", focus: "Vestibular System", injury: "Concussion/Vertigo", setsReps: "3x30s", phase: "Early-Mid Rehab", description: "Focus on a fixed point while moving head slowly." },
            { id: 358, name: "Reach to Cones (Single Leg)", category: "Balance/Coordination", focus: "Functional Reach", injury: "Low Back/Hip", setsReps: "3x10 reaches/leg", phase: "Late Rehab", description: "Maintain balance while reaching forward/sideways/diagonally." },
            { id: 359, name: "Tandem Walk (Heel-to-Toe)", category: "Balance/Coordination", focus: "Gait Coordination", injury: "General Balance", setsReps: "3x10 steps", phase: "Mid Rehab", description: "Walking with a narrow base of support; improves dynamic balance." },
            { id: 360, name: "Single Leg Squat (To Chair)", category: "Balance/Coordination", focus: "Unilateral Control", injury: "Knee (ACL)", setsReps: "3x10/leg", phase: "Late Rehab", description: "Deep single-leg stability and strength practice." },
            { id: 361, name: "Foam Pad Single Leg Stance", category: "Balance/Coordination", focus: "Proprioception", injury: "General Balance", setsReps: "3x45s/leg", phase: "Mid Rehab", description: "Increases the difficulty of single leg stance by softening the surface." },
            { id: 362, name: "Star Excursion Balance Test (Modified)", category: "Balance/Coordination", focus: "Dynamic Reach", injury: "Ankle Sprain", setsReps: "3x5 reaches/direction", phase: "Late Rehab", description: "Reaching in multiple directions to challenge the supporting leg." },
            { id: 363, name: "Head Turns in Single Leg Stance (Eyes Open)", category: "Balance/Coordination", focus: "Vestibular Challenge", injury: "Concussion", setsReps: "3x30s", phase: "Mid Rehab", description: "Adds a vestibular component to the balance drill." },
            { id: 364, name: "Ball Toss (Single Leg)", category: "Balance/Coordination", focus: "Cognitive/Motor Integration", injury: "General Stability", setsReps: "3x20 tosses/leg", phase: "Advanced Rehab", description: "Forces attention away from the support leg." },
            { id: 365, name: "Heel Raises (Slow/Controlled)", category: "Balance/Coordination", focus: "Ankle Strategy", injury: "Achilles/Ankle", setsReps: "3x15 reps", phase: "Early Rehab", description: "Slow, focused ankle movements for initial balance strategy." },
            { id: 366, name: "Walking Backward", category: "Balance/Coordination", focus: "Gait Reversal", injury: "General Balance", setsReps: "3x20 steps", phase: "Mid Rehab", description: "Challenges balance in a non-familiar gait pattern." },
            { id: 367, name: "Lateral Hops (Mini)", category: "Balance/Coordination", focus: "Plyometric/Landing", injury: "Knee/Ankle", setsReps: "3x10 hops/side", phase: "Advanced Rehab", description: "Small, quick side-to-side movements for landing control." },
            { id: 368, name: "Marching in Place (High Knees)", category: "Balance/Coordination", focus: "Dynamic Balance", injury: "General Balance", setsReps: "3x30s", phase: "Mid Rehab", description: "Lifting knees high and maintaining rhythm and balance." },
            { id: 369, name: "Heel-to-Toe Rockers (Sitting)", category: "Balance/Coordination", focus: "Ankle Mobility, Balance", injury: "Early Ankle Rehab", setsReps: "3x20 reps", phase: "Early Rehab", description: "Rocking the foot from heel to toe while seated." },
            { id: 370, name: "Single Leg Stance (Perturbation)", category: "Balance/Coordination", focus: "Reactive Stability", injury: "Ankle Sprain", setsReps: "3x30s/leg", phase: "Advanced Rehab", description: "Standing on one leg while a partner gives small, unpredictable pushes." },
            
            <!-- START NEW BALANCE/COORDINATION EXERCISES (IDs 371-450) -->
            { id: 371, name: "Single Leg RDL (Bodyweight)", category: "Balance/Coordination", focus: "Dynamic Balance, Posterior Chain", injury: "Hip/Low Back", setsReps: "3x10/leg", phase: "Late Rehab", description: "Hinging at the hip while keeping the back straight; focus on foot stability." },
            { id: 372, name: "Tandem Walk (Eyes Closed)", category: "Balance/Coordination", focus: "Gait Coordination, Vestibular", injury: "Concussion", setsReps: "3x10 steps", phase: "Advanced Rehab", description: "Walking heel-to-toe without visual feedback." },
            { id: 373, name: "BOSU Ball Squat (Two Legs)", category: "Balance/Coordination", focus: "Dynamic Stability", injury: "Knee/Ankle", setsReps: "3x15 reps", phase: "Mid Rehab", description: "Squatting on the unstable BOSU surface." },
            { id: 374, name: "Single Leg Stance (Throwing/Catching)", category: "Balance/Coordination", focus: "Dual-Tasking", injury: "Return to Sport", setsReps: "3x20 catches/leg", phase: "Advanced Rehab", description: "Standing on one leg while performing a cognitive or upper body task." },
            { id: 375, name: "Walking on Toes (Slow)", category: "Balance/Coordination", focus: "Calf Endurance, Ankle Strategy", injury: "Achilles/Ankle", setsReps: "3x20 steps", phase: "Mid Rehab", description: "Controlled walking high up on the balls of the feet." },
            { id: 376, name: "Single Leg Side Hop (Mini)", category: "Balance/Coordination", focus: "Lateral Landing Control", injury: "Ankle Sprain", setsReps: "3x10/side", phase: "Late Rehab", description: "Hopping side-to-side and landing on the same leg, stabilizing quickly." },
            { id: 377, name: "Wobble Board Balance (Two Feet)", category: "Balance/Coordination", focus: "Ankle Proprioception", injury: "Ankle Instability", setsReps: "3x60s", phase: "Mid Rehab", description: "Standing on an unstable board; control the board from touching the ground." },
            { id: 378, name: "Lateral Stepping Over Object (Low)", category: "Balance/Coordination", focus: "Hip Stability, Gait", injury: "Hip/Knee", setsReps: "3x10/side", phase: "Mid Rehab", description: "Stepping sideways over a small object without touching it." },
            { id: 379, name: "Single Leg Stance (Head Shakes)", category: "Balance/Coordination", focus: "Vestibular Challenge", injury: "Concussion", setsReps: "3x30s", phase: "Late Rehab", description: "Rapid head movements (yes/no) while maintaining balance." },
            { id: 380, name: "Box Jumps (Two Legs, Low)", category: "Balance/Coordination", focus: "Landing Mechanics, Power", injury: "Return to Sport", setsReps: "3x10 reps", phase: "Advanced Rehab", description: "Jumping up onto a stable low box; focus on soft landing." },
            { id: 381, "name": "BOSU Ball Single Leg Throw/Catch", category: "Balance/Coordination", focus: "Dual-Tasking, Unstable Surface", injury: "Advanced Stability", setsReps: "3x15 catches/leg", phase: "Advanced Rehab", description: "Combining an unstable surface with a cognitive/motor task." },
            { id: 382, "name": "Figure-Eight Walk", category: "Balance/Coordination", focus: "Gait Initiation, Turning", injury: "General Balance", setsReps: "3x5 rotations", phase: "Mid Rehab", description: "Walking in a controlled figure-eight pattern around cones." },
            { id: 383, "name": "Single Leg Stance (Reaching Behind)", category: "Balance/Coordination", focus: "Functional Reach, Hip Hinge", injury: "Low Back/Hip", setsReps: "3x10/leg", phase: "Late Rehab", description: "Reaching diagonally behind the support leg while maintaining balance." },
            { id: 384, "name": "Walking Heel-to-Toe Backward", category: "Balance/Coordination", focus: "Gait Reversal, Coordination", injury: "General Balance", setsReps: "3x10 steps", phase: "Late Rehab", description: "Careful heel-to-toe walking while moving backward." },
            { id: 385, "name": "Foam Pad Tandem Stance", category: "Balance/Coordination", focus: "Proprioception, Narrow Base", injury: "General Balance", setsReps: "3x45s/side", phase: "Mid Rehab", description: "Increased difficulty tandem stance on a soft surface." },
            { id: 386, "name": "Lateral Bounds (Low Intensity)", category: "Balance/Coordination", focus: "Power, Deceleration", injury: "Return to Sport", setsReps: "3x8 bounds/side", phase: "Advanced Rehab", description: "Jumping sideways for distance, focusing on controlling the landing." },
            { id: 387, "name": "Single Leg Hop for Distance (Control)", category: "Balance/Coordination", focus: "Explosive Power, Landing", injury: "Knee (ACL)", setsReps: "3x5 hops/leg", phase: "Advanced Rehab/Return to Sport", description: "Jumping forward on one leg, maximizing distance while stabilizing the landing." },
            { id: 388, "name": "Weight Shifting (Ankle Strategy Focus)", category: "Balance/Coordination", focus: "Ankle Strategy", injury: "Early Ankle Rehab", setsReps: "3x20 reps", phase: "Early Rehab", description: "Rocking forward/backward, focusing movement purely through the ankle joints." },
            { id: 389, "name": "Agility Ladder (Walk-through)", category: "Balance/Coordination", focus: "Foot Speed, Coordination", injury: "Gait Mechanics", setsReps: "3x3 reps", phase: "Mid Rehab", description: "Slow, deliberate stepping through the ladder squares." },
            { id: 390, "name": "BOSU Ball Catch/Toss (Medicine Ball)", category: "Balance/Coordination", focus: "Core, Dynamic Stability", injury: "Shoulder/Core", setsReps: "3x10 tosses", phase: "Advanced Rehab", description: "Standing on the BOSU, receiving and throwing a light weight to challenge stability." },
            { id: 391, "name": "Single Leg Stance (With Squat to 45 Degrees)", category: "Balance/Coordination", focus: "Unilateral Strength/Control", injury: "Knee Pain", setsReps: "3x10/leg", phase: "Late Rehab", description: "Performing a shallow squat while balancing on one leg." },
            { id: 392, "name": "Gaze Stabilization (Head Turns Fast)", category: "Balance/Coordination", focus: "Vestibular System", injury: "Concussion", setsReps: "3x30s", phase: "Late Rehab", description: "Focus on fixed point while moving head rapidly." },
            { id: 393, "name": "Foam Pad Single Leg Squat (Assisted)", category: "Balance/Coordination", focus: "Unstable Unilateral Control", injury: "General Stability", setsReps: "3x8/leg", phase: "Advanced Rehab", description: "Shallow single-leg squat on foam; hold wall lightly for support." },
            { id: 394, "name": "Walking with Head Turns (Slow)", category: "Balance/Coordination", focus: "Gait, Vestibular", injury: "General Balance", setsReps: "3x10 steps", phase: "Mid Rehab", description: "Walking straight while slowly turning the head side-to-side." },
            { id: 395, "name": "Wobble Board Single Leg Balance (Assisted)", category: "Balance/Coordination", focus: "Ankle Proprioception", injury: "Ankle Instability", setsReps: "3x45s/leg", phase: "Late Rehab", description: "Standing on one leg on the board; use finger on wall for light assistance." },
            { id: 396, "name": "Carioca Steps (Slow/Controlled)", category: "Balance/Coordination", focus: "Rotational Gait, Coordination", injury: "Return to Sport", setsReps: "3x10 steps/side", phase: "Late Rehab", description: "Cross-stepping motion focusing on hip and knee stability." },
            { id: 397, "name": "BOSU Ball Single Leg RDL", category: "Balance/Coordination", focus: "Advanced Dynamic Balance", injury: "Total Body Stability", setsReps: "3x8/leg", phase: "Advanced Rehab", description: "Single-leg RDL performed on the unstable BOSU dome." },
            { id: 398, "name": "Jump to Opposite Leg Stick", category: "Balance/Coordination", focus: "Landing Mechanics, Power", injury: "Return to Sport", setsReps: "3x10 reps", phase: "Advanced Rehab", description: "Jumping off one leg and landing on the opposite leg, sticking the landing." },
            { id: 399, "name": "Tandem Walk (Dual-Tasking)", category: "Balance/Coordination", focus: "Cognitive/Motor Integration", injury: "Concussion", setsReps: "3x10 steps", phase: "Advanced Rehab", description: "Performing heel-to-toe walk while counting backward or reciting the alphabet." },
            { id: 400, "name": "Heel Walks (Controlled)", category: "Balance/Coordination", focus: "Ankle Strategy, Tibialis Anterior", injury: "General Balance", setsReps: "3x20 steps", phase: "Mid Rehab", description: "Walking purely on the heels, toes pointed up." },
            { id: 401, name: "Lateral Weight Shift (Mini Squat)", category: "Balance/Coordination", focus: "Hip Strategy, Frontal Plane", injury: "Knee/Hip", setsReps: "3x15/side", phase: "Mid Rehab", description: "Controlled side-to-side weight shifting while in a shallow squat position." },
            { id: 402, name: "Single Leg Stance (Throwing at Wall)", category: "Balance/Coordination", focus: "Reactive Core, Dual-Tasking", injury: "Shoulder/Core", setsReps: "3x20 throws/leg", phase: "Advanced Rehab", description: "Standing on one leg while throwing a ball against a wall and catching it." },
            { id: 403, name: "Forward Hops (Single Leg)", category: "Balance/Coordination", focus: "Plyometric, Landing", injury: "Ankle Sprain", setsReps: "3x10 hops/leg", phase: "Late Rehab", description: "Small, quick forward hops on one leg, focusing on a quiet landing." },
            { id: 404, name: "Weight Shifting (Dynamic Squat)", category: "Balance/Coordination", focus: "Hip Strategy, Dynamic Control", injury: "Knee Pain", setsReps: "3x15 reps", phase: "Mid Rehab", description: "Shifting weight side-to-side while constantly moving in a light squat." },
            { id: 405, name: "Single Leg Stance (With Knee Drive)", category: "Balance/Coordination", focus: "Dynamic Hip Stability", injury: "Hip Instability", setsReps: "3x15/leg", phase: "Late Rehab", description: "Lift the free leg and forcefully drive the knee up, then control the return." },
            { id: 406, name: "BOSU Ball Lateral Step Over", category: "Balance/Coordination", focus: "Dynamic Unstable Gait", injury: "Ankle/Knee", setsReps: "3x10/side", phase: "Advanced Rehab", description: "Stepping up and over the BOSU dome sideways." },
            { id: 407, name: "Walking Backward (Head Turns)", category: "Balance/Coordination", focus: "Gait, Vestibular", injury: "Concussion", setsReps: "3x10 steps", phase: "Advanced Rehab", description: "Walking backward while slowly turning the head side-to-side." },
            { id: 408, name: "Star Excursion Balance Test (Max Reach)", category: "Balance/Coordination", focus: "Max Dynamic Reach", injury: "Return to Sport", setsReps: "3x5 reaches/direction", phase: "Advanced Rehab", description: "Reaching as far as possible in all directions to establish a baseline." },
            { id: 409, name: "Wobble Board Alphabet (Single Leg)", category: "Balance/Coordination", focus: "Cognitive/Proprioception", injury: "Ankle Instability", setsReps: "3xABC/leg", phase: "Advanced Rehab", description: "Maintaining single-leg balance on the board while tracing the alphabet with the free foot." },
            { id: 410, name: "Agility Ladder (Ickey Shuffle Walk)", category: "Balance/Coordination", focus: "Coordination, Footwork", injury: "Return to Sport", setsReps: "3x3 reps", phase: "Late Rehab", description: "Walking the Ickey Shuffle pattern (in-in-out-out) slowly." },
            { id: 411, "name": "Single Leg Stance (Weighted)", category: "Balance/Coordination", focus: "Proprioception, Strength", injury: "General Stability", setsReps: "3x45s/leg", phase: "Late Rehab", description: "Holding a light dumbbell in the hand opposite the stance leg." },
            { id: 412, "name": "Gait on Foam Pad (Walking)", category: "Balance/Coordination", focus: "Unstable Gait", injury: "General Balance", setsReps: "3x10 steps", phase: "Advanced Rehab", description: "Walking slowly on a long foam balance pad." },
            { id: 413, "name": "Lateral Stepping (Band at Ankles)", category: "Balance/Coordination", focus: "Glute Medius, Frontal Plane", injury: "Knee/Hip", setsReps: "3x15 steps/side", phase: "Mid Rehab", description: "Stepping sideways against band resistance while maintaining balance." },
            { id: 414, "name": "Single Leg Squat (Pistol Progression with Assist)", category: "Balance/Coordination", focus: "Unilateral Strength, Balance", injury: "Advanced Strength", setsReps: "3x5/leg", phase: "Advanced Rehab", description: "Deep single-leg squat using a TRX or band for partial support." },
            { id: 415, "name": "Tandem Walk (Cognitive Task)", category: "Balance/Coordination", focus: "Dual-Tasking, Coordination", injury: "Concussion", setsReps: "3x10 steps", phase: "Mid Rehab", description: "Walking heel-to-toe while naming a list of objects (e.g., fruits)." },
            { id: 416, "name": "BOSU Ball Lunges (Alternating)", category: "Balance/Coordination", focus: "Dynamic Stability, Quads", injury: "Knee/Ankle", setsReps: "3x10/leg", phase: "Advanced Rehab", description: "Alternating forward lunges onto the unstable BOSU dome." },
            { id: 417, "name": "Lateral Shuttle Run (Controlled)", category: "Balance/Coordination", focus: "Change of Direction, Deceleration", injury: "Return to Sport", setsReps: "3x5 runs", phase: "Advanced Rehab", description: "Short side-to-side sprints, focusing on controlled stops and starts." },
            { id: 418, "name": "Single Leg Stance (Throwing Weighted Object)", category: "Balance/Coordination", focus: "Maximal Core Stability", injury: "Shoulder/Core", setsReps: "3x10 throws/leg", phase: "Advanced Rehab", description: "Using a light medicine ball to increase the stability challenge." },
            { id: 419, "name": "Walking Sideways (Eyes Closed)", category: "Balance/Coordination", focus: "Gait, Proprioception", injury: "General Balance", setsReps: "3x10 steps/side", phase: "Advanced Rehab", description: "Walking sideways without visual input." },
            { id: 420, "name": "Heel Touches (Single Leg)", category: "Balance/Coordination", focus: "Dynamic Balance, Hip Hinge", injury: "Low Back/Hip", setsReps: "3x12/leg", phase: "Late Rehab", description: "Tapping the heel of the free foot to the ground in front, maintaining stance leg stability." },
            { id: 421, "name": "T-Walk (Eyes Open)", category: "Balance/Coordination", focus: "Gait Coordination, Turning", injury: "General Balance", setsReps: "3x5 reps", phase: "Mid Rehab", description: "Walking in a T shape (forward, turn 90 degrees, step) to practice turns." },
            { id: 422, "name": "Single Leg Calf Raises (Foam Pad)", category: "Balance/Coordination", focus: "Ankle Proprioception, Strength", injury: "Achilles/Ankle", setsReps: "3x10/leg", phase: "Late Rehab", description: "Performing calf raises on an unstable foam surface." },
            { id: 423, "name": "Wobble Board Squats (Two Feet)", category: "Balance/Coordination", focus: "Dynamic Stability, Knee Control", injury: "Knee Pain", setsReps: "3x10 reps", phase: "Late Rehab", description: "Shallow squats performed on the wobble board." },
            { id: 424, "name": "Lateral Stepping (BOSU Top)", category: "Balance/Coordination", focus: "Frontal Plane Gait", injury: "Hip/Knee", setsReps: "3x10 steps/side", phase: "Advanced Rehab", description: "Walking across the top of the unstable BOSU dome." },
            { id: 425, "name": "Single Leg Stance (Opposite Arm/Leg Reach)", category: "Balance/Coordination", focus: "Dynamic Core, Reach", injury: "Hip/Low Back", setsReps: "3x10/leg", phase: "Late Rehab", description: "Reaching the hand out while extending the opposite leg back (like a scaled Bird-Dog)." },
            { id: 426, "name": "Agility Ladder (Quick Feet Walk)", category: "Balance/Coordination", focus: "Foot Speed, Coordination", injury: "Return to Sport", setsReps: "3x5 reps", phase: "Late Rehab", description: "Walking through the ladder with a quick, high-knee rhythm." },
            { id: 427, "name": "Single Leg Hop (Clock Drill)", category: "Balance/Coordination", focus: "Dynamic Reach, Landing", injury: "Ankle/Knee", setsReps: "3x5 hops/direction", phase: "Advanced Rehab", description: "Hopping forward to specific points on a clock face marked on the floor." },
            { id: 428, "name": "Gait on Various Surfaces (Towel/Carpet)", category: "Balance/Coordination", focus: "Environmental Adaptability", injury: "General Balance", setsReps: "3x1 minute", phase: "Mid Rehab", description: "Walking slowly on surfaces with varying texture/stability." },
            { id: 429, "name": "Tandem Stance (Arm Reaches Overhead)", category: "Balance/Coordination", focus: "Static Balance, Center of Gravity Shift", injury: "General Stability", setsReps: "3x10 reps", phase: "Mid Rehab", description: "Raising arms slowly overhead while maintaining heel-to-toe stance." },
            { id: 430, "name": "Single Leg Stance (Throwing Heavy Ball)", category: "Balance/Coordination", focus: "Maximal Reactive Stability", injury: "Advanced Core", setsReps: "3x8 throws/leg", phase: "Return to Sport", description: "Throwing a heavier medicine ball to maximally challenge balance and core reaction." },
            { id: 431, "name": "Walking Sideways (Tandem)", category: "Balance/Coordination", focus: "Frontal Plane Gait, Narrow Base", injury: "General Balance", setsReps: "3x10 steps/side", phase: "Late Rehab", description: "Stepping sideways with one foot immediately following the other (heel-to-toe sideways)." },
            { id: 432, "name": "BOSU Ball Hops (Two Legs, Side-to-Side)", category: "Balance/Coordination", focus: "Dynamic Stability, Plyo", injury: "Ankle/Knee", setsReps: "3x15 reps", phase: "Advanced Rehab", description: "Hopping from side-to-side over the top of the BOSU dome." },
            { id: 433, "name": "Single Leg Stance (Perturbation, Eyes Closed)", category: "Balance/Coordination", focus: "Max Proprioception", injury: "Advanced Stability", setsReps: "3x20s/leg", phase: "Advanced Rehab", description: "The most difficult static balance drill; partner provides light pushes without visual input." },
            { id: 434, "name": "Figure-Eight Walk (Dual-Tasking)", category: "Balance/Coordination", focus: "Cognitive/Motor Integration", injury: "Concussion", setsReps: "3x5 rotations", phase: "Advanced Rehab", description: "Walking the figure-eight while performing a mental task." },
            { id: 435, "name": "Single Leg Stance (Mini-Band Push)", category: "Balance/Coordination", focus: "Glute Medius, Reactive Stability", injury: "Hip Instability", setsReps: "3x45s/leg", phase: "Late Rehab", description: "Partner pulls a band around the stance knee in various directions; resist movement." },
            { id: 436, "name": "Single-Leg Deceleration Squat", category: "Balance/Coordination", focus: "Landing Mechanics, Eccentric Quads", injury: "Return to Sport", setsReps: "3x8/leg", phase: "Advanced Rehab", description: "Jumping two feet, landing on one leg, and immediately absorbing the force into a squat." },
            { id: 437, "name": "Tandem Walk (Backwards, Eyes Closed)", category: "Balance/Coordination", focus: "Gait Reversal, Vestibular", injury: "Concussion", setsReps: "3x5 steps", phase: "Advanced Rehab", description: "The most challenging gait drill for vestibular balance." },
            { id: 438, "name": "Cone Drills (T-Test Walk)", category: "Balance/Coordination", focus: "Change of Direction, Coordination", injury: "Return to Sport", setsReps: "3x3 reps", phase: "Late Rehab", description: "Walking the pattern of the T-Test (forward, side shuffle, back) slowly." },
            { id: 439, "name": "Single Leg Stance (Broomstick Challenge)", category: "Balance/Coordination", focus: "Dynamic Stability, Focus", injury: "General Balance", setsReps: "3x30s/leg", phase: "Late Rehab", description: "Balancing a broomstick vertically on the head while standing on one leg." },
            { id: 440, "name": "Wobble Board Single Leg Ball Toss", category: "Balance/Coordination", focus: "Triple Integration", injury: "Total Body Stability", setsReps: "3x15 catches/leg", phase: "Advanced Rehab", description: "Combining instability, unilateral stance, and a dual-tasking element." },
            { id: 441, "name": "Forward Lunge (BOSU Landing)", category: "Balance/Coordination", focus: "Dynamic Landing, Unstable", injury: "Knee/Ankle", setsReps: "3x10/leg", phase: "Advanced Rehab", description: "Stepping forward into a lunge, landing the front foot on the unstable BOSU dome." },
            { id: 442, "name": "Agility Ladder (2 Feet In/1 Foot Out Walk)", category: "Balance/Coordination", focus: "Coordination, Footwork", injury: "Return to Sport", setsReps: "3x5 reps", phase: "Late Rehab", description: "Slow walking pattern of 2 feet in, one foot out of the ladder squares." },
            { id: 443, "name": "Single Leg RDL (Reach with Weight)", category: "Balance/Coordination", focus: "Dynamic Balance, Load", injury: "Hip/Low Back", setsReps: "3x8/leg", phase: "Advanced Rehab", description: "Holding a light weight in the opposite hand and reaching it toward the ground." },
            { id: 444, "name": "Walking Forward (Eyes Closed)", category: "Balance/Coordination", focus: "Gait, Proprioception", injury: "General Balance", setsReps: "3x10 steps", phase: "Advanced Rehab", description: "Walking straight ahead without visual input." },
            { id: 445, "name": "Single Leg Stance (Throwing at Angle)", category: "Balance/Coordination", focus: "Rotational Core, Reactive Stability", injury: "Return to Sport", setsReps: "3x10/side", phase: "Advanced Rehab", description: "Throwing a ball at a side angle to challenge anti-rotation stability." },
            { id: 446, "name": "Heel-to-Toe Rockers (Standing)", category: "Balance/Coordination", focus: "Ankle Strategy, Balance", injury: "Ankle Sprain", setsReps: "3x20 reps", phase: "Early-Mid Rehab", description: "Rocking the body from toes up to heels down, maintaining a controlled rhythm." },
            { id: 447, "name": "Lateral Stepping (High Step)", category: "Balance/Coordination", focus: "Dynamic Hip Stability", injury: "Hip/Knee", setsReps: "3x10/side", phase: "Mid Rehab", description: "Stepping sideways, intentionally lifting the knee high over an imaginary obstacle." },
            { id: 448, "name": "BOSU Ball Single Leg Squat (Unassisted)", category: "Balance/Coordination", focus: "Max Unilateral Stability", injury: "Advanced Strength/Stability", setsReps: "3x5/leg", phase: "Return to Sport", description: "Performing a squat on the unstable BOSU dome without any assistance." },
            { id: 449, "name": "Gait on Single Line (Eyes Open)", category: "Balance/Coordination", focus: "Narrow Base Gait", injury: "General Balance", setsReps: "3x10 steps", phase: "Mid Rehab", description: "Walking along a single straight line on the floor." },
            { id: 450, "name": "Jump Rope (Single Leg, Slow)", category: "Balance/Coordination", focus: "Plyometric Endurance, Stability", injury: "Return to Sport", setsReps: "3x30 jumps/leg", phase: "Advanced Rehab", description: "Slow, controlled single-leg hops over a jump rope." }
        ];

        // --- GLOBAL VARIABLES (for shared state) ---
        let currentExercises = exercises; // The currently filtered/searched list
        
        // --- UTILITY & VIEW FUNCTIONS ---
        
        /**
         * Renders the exercise cards into the results container based on the current search/filter.
         * @param {Array<Object>} exerciseList - The array of exercises to display.
         */
        function renderExerciseLibrary(exerciseList = exercises) {
            const container = document.getElementById('resultsContainer');
            const countSpan = document.getElementById('exerciseCount');
            container.innerHTML = ''; // Clear previous results

            if (exerciseList.length === 0) {
                document.getElementById('noResults').classList.remove('hidden');
                countSpan.textContent = '0';
                return;
            }

            document.getElementById('noResults').classList.add('hidden');
            countSpan.textContent = exerciseList.length;

            exerciseList.forEach(exercise => {
                // Map category to CSS border class
                let borderClass = '';
                switch(exercise.category) {
                    case 'Strength Training': borderClass = 'strength-border'; break;
                    case 'Stretching/Flexibility': borderClass = 'stretching-border'; break;
                    case 'Balance/Coordination': borderClass = 'balance-border'; break;
                    case 'Functional Exercise': borderClass = 'functional-border'; break;
                    case 'Motor Control': borderClass = 'motor-control-border'; break;
                    default: borderClass = 'border-gray-500';
                }

                const card = document.createElement('div');
                card.className = `card bg-gray-700 p-4 rounded-xl shadow-lg hover:shadow-2xl transition-all ${borderClass}`;
                card.setAttribute('draggable', 'true');
                card.setAttribute('ondragstart', `handleDragStart(event, ${exercise.id})`);
                
                // Use a data attribute to store the full exercise object for easier drop handling
                card.dataset.exercise = JSON.stringify(exercise); 

                card.innerHTML = `
                    <h4 class="text-xl font-bold text-teal-300 mb-1">${exercise.name}</h4>
                    <p class="text-sm font-semibold text-gray-400 mb-2">${exercise.category} | Phase: ${exercise.phase}</p>
                    <p class="text-gray-200 mb-2">${exercise.setsReps}</p>
                    <p class="text-gray-400 text-sm">${exercise.description}</p>
                    <div class="mt-2 text-xs font-medium text-gray-500">Focus: ${exercise.focus} | Injury: ${exercise.injury}</div>
                `;

                container.appendChild(card);
            });
        }
        
        /**
         * Filters the exercises based on the search input.
         */
        function searchExercises() {
            const searchInput = document.getElementById('searchInput');
            const searchTerm = searchInput.value.toLowerCase().trim();

            if (searchTerm === '') {
                currentExercises = exercises;
            } else {
                currentExercises = exercises.filter(exercise => 
                    exercise.name.toLowerCase().includes(searchTerm) ||
                    exercise.category.toLowerCase().includes(searchTerm) ||
                    exercise.focus.toLowerCase().includes(searchTerm) ||
                    exercise.injury.toLowerCase().includes(searchTerm) ||
                    exercise.phase.toLowerCase().includes(searchTerm) ||
                    exercise.description.toLowerCase().includes(searchTerm)
                );
            }
            renderExerciseLibrary(currentExercises);
        }

        // Attach search handler
        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('searchInput').addEventListener('input', searchExercises);
        });
        
        // --- DRAG-AND-DROP FUNCTIONS ---
        
        /**
         * Initiates the drag operation, storing the exercise data.
         * The ID is enough, but storing the whole JSON is more robust.
         */
        window.handleDragStart = function(event, exerciseId) {
            const exerciseData = event.target.dataset.exercise;
            event.dataTransfer.setData('text/plain', exerciseData);
            
            // Add a class to the original element to give a visual cue (optional)
            event.target.classList.add('opacity-50');
        };

        /**
         * Handles the drag over event on the HEP Pad.
         */
        window.handleDragOver = function(event) {
            event.preventDefault(); // Essential to allow a drop
            const hepPad = document.getElementById('hepPad');
            hepPad.classList.add('drag-over');
        };

        /**
         * Handles the drag leave event on the HEP Pad.
         */
        window.handleDragLeave = function(event) {
            const hepPad = document.getElementById('hepPad');
            // Check if the cursor is truly leaving the drop zone area
            // This is a common bug fix for nested elements
            if (!hepPad.contains(event.relatedTarget)) {
                hepPad.classList.remove('drag-over');
            }
        };

        /**
         * Handles the drop event on the HEP Pad.
         */
        window.handleDrop = function(event) {
            event.preventDefault();
            const hepPad = document.getElementById('hepPad');
            hepPad.classList.remove('drag-over');

            try {
                const exerciseJson = event.dataTransfer.getData('text/plain');
                const exercise = JSON.parse(exerciseJson);
                
                // Add to the selected list if not already present (optional check)
                if (!window.selectedExercises.some(e => e.id === exercise.id)) {
                    // Create a clean copy to allow modification (e.g., sets/reps change)
                    const prescribedExercise = {...exercise, setsReps: exercise.setsReps};
                    window.selectedExercises.push(prescribedExercise);
                    window.renderHEPPad();
                    showMessage("Exercise Added", `**${exercise.name}** has been added to the prescription pad.`);
                } else {
                    showMessage("Already Added", `**${exercise.name}** is already in the prescription pad.`);
                }

            } catch (e) {
                console.error("Error parsing exercise data:", e);
                showMessage("Drop Error", "Could not add exercise. Data format incorrect.");
            }
        };
        
        /**
         * Removes an exercise from the prescription pad.
         */
        window.removeExercise = function(exerciseId) {
            window.selectedExercises = window.selectedExercises.filter(e => e.id !== exerciseId);
            window.renderHEPPad();
            showMessage("Removed", "Exercise removed from the current program.");
        };

        /**
         * Renders the exercises currently in the Prescription Pad.
         */
        window.renderHEPPad = function() {
            const container = document.getElementById('hepPadContent');
            const emptyMsg = document.getElementById('hepPadEmptyMessage');
            const button = document.getElementById('prescribeButton');
            container.innerHTML = '';
            
            if (window.selectedExercises.length === 0) {
                emptyMsg.classList.remove('hidden');
                button.disabled = true;
                button.textContent = 'Generate and Save HEP (0 Exercises)';
                return;
            }

            emptyMsg.classList.add('hidden');
            button.disabled = false;
            button.textContent = `Generate and Save HEP (${window.selectedExercises.length} Exercises)`;

            window.selectedExercises.forEach(exercise => {
                let borderClass = '';
                switch(exercise.category) {
                    case 'Strength Training': borderClass = 'strength-border'; break;
                    case 'Stretching/Flexibility': borderClass = 'stretching-border'; break;
                    case 'Balance/Coordination': borderClass = 'balance-border'; break;
                    case 'Functional Exercise': borderClass = 'functional-border'; break;
                    case 'Motor Control': borderClass = 'motor-control-border'; break;
                    default: borderClass = 'border-gray-500';
                }
                
                const prescribedCard = document.createElement('div');
                prescribedCard.className = `bg-gray-700 p-3 rounded-lg shadow-md ${borderClass} relative`;
                prescribedCard.innerHTML = `
                    <h5 class="text-lg font-bold text-teal-300">${exercise.name}</h5>
                    <p class="text-sm text-gray-400 mb-2">${exercise.category} | ${exercise.setsReps}</p>
                    <textarea id="notes-${exercise.id}" class="w-full h-12 p-1 text-sm bg-gray-600 text-gray-200 rounded resize-none placeholder-gray-400 focus:ring-2 focus:ring-orange-500" placeholder="Custom sets/reps or notes...">${exercise.customNotes || ''}</textarea>
                    <button onclick="removeExercise(${exercise.id})" class="absolute top-2 right-2 text-red-500 hover:text-red-600 transition-colors" title="Remove Exercise">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg>
                    </button>
                `;
                
                container.appendChild(prescribedCard);
                
                // Add event listener to save custom notes immediately
                const notesArea = document.getElementById(`notes-${exercise.id}`);
                notesArea.addEventListener('input', (e) => {
                    const index = window.selectedExercises.findIndex(e => e.id === exercise.id);
                    if (index !== -1) {
                        window.selectedExercises[index].customNotes = e.target.value;
                    }
                });
            });
        };

        // --- PROGRAM SAVING AND LOADING FUNCTIONS ---
        
        /**
         * Loads programs from LocalStorage.
         */
        function loadPrograms() {
            try {
                const data = localStorage.getItem(LOCAL_STORAGE_KEY);
                patientPrograms = data ? JSON.parse(data) : [];
                
                // Ensure programs are sorted by timestamp (newest first)
                patientPrograms.sort((a, b) => (b.timestamp || 0) - (a.timestamp || 0));
                
                renderProgramsList();
            } catch (e) {
                console.error("Error loading programs from LocalStorage:", e);
                showMessage("Error", "Failed to load saved programs. Local Storage might be full or blocked.");
            }
        }
        
        /**
         * Saves the current programs array back to LocalStorage.
         */
        function saveProgramsToLocalStorage() {
            try {
                localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(patientPrograms));
            } catch (e) {
                console.error("Error saving programs to LocalStorage:", e);
                showMessage("Error", "Failed to save program. Local Storage might be full or blocked.");
            }
        }
        
        /**
         * Prompts for patient name and saves the current HEP Pad exercises as a new patient program.
         */
        window.saveProgram = function () {
           const programTitleInput = document.getElementById('programTitleInput');
            const patientNameInput = document.getElementById('patientNameInput');

            const programTitle = programTitleInput.value.trim() || 'Untitled Program'; // Get title
            const patientName = patientNameInput.value.trim() || 'Untitled Patient'; // Get name
            
            if (window.selectedExercises.length === 0) {
                showMessage("Error", "The Prescription Pad is empty. Please drag exercises first.");
                return;
            }
            
            if (patientName === 'Untitled Patient') {
                showMessage("Note", "Saving program with default patient name. Please enter a name next time!");
            }
            
            // Map the selected exercises to a simplified structure for storage
            const exercisesToSave = window.selectedExercises.map(ex => ({
                id: ex.id,
                name: ex.name,
                category: ex.category,
                setsReps: ex.setsReps,
                customNotes: ex.customNotes || '', // Store custom notes
                phase: ex.phase,
                description: ex.description // Store full description for viewing
            }));

            const newProgram = {
                id: Date.now().toString(), // Use timestamp as a unique ID
                programTitle: programTitle, // <--- **NEW LINE: SAVE THE PROGRAM TITLE**
                patientName: patientName,
                exercises: exercisesToSave,
                timestamp: Date.now() // Current time in milliseconds
            };
            
            const patientName = prompt("Enter Patient Name for this HEP:");
            if (!patientName || patientName.trim() === "") {
                showMessage("Cancelled", "Program save cancelled. No patient name provided.");
                return;
            }
            
            // Map the selected exercises to a simplified structure for storage
            const exercisesToSave = window.selectedExercises.map(ex => ({
                id: ex.id,
                name: ex.name,
                category: ex.category,
                setsReps: ex.setsReps,
                customNotes: ex.customNotes || '', // Store custom notes
                phase: ex.phase,
                description: ex.description // Store full description for viewing
            }));

            const newProgram = {
                id: Date.now().toString(), // Use timestamp as a unique ID
                patientName: patientName.trim(),
                exercises: exercisesToSave,
                timestamp: Date.now() // Current time in milliseconds
            };

            patientPrograms.push(newProgram);
            saveProgramsToLocalStorage(); // Save the updated list

            showMessage("Success", `Program saved successfully for patient: **${patientName.trim()}**`);
            
            // Clear the pad after saving
            window.selectedExercises = []; 
            window.renderHEPPad();
            renderProgramsList(); // Update the saved programs view
        }
        
        /**
         * Renders the list of saved programs.
         */
        function renderProgramsList() {
            const listContainer = document.getElementById('programsList');
            const emptyMsg = document.getElementById('programsEmpty');
            listContainer.innerHTML = '';
            
            if (patientPrograms.length === 0) {
                emptyMsg.classList.remove('hidden');
                return;
            }
            
            emptyMsg.classList.add('hidden');

            patientPrograms.forEach(program => {
                const date = new Date(program.timestamp).toLocaleDateString();
                const time = new Date(program.timestamp).toLocaleTimeString();
                
                const card = document.createElement('div');
                card.className = `bg-gray-900 p-4 rounded-xl shadow-lg border-l-8 border-orange-500 flex flex-col sm:flex-row justify-between items-start sm:items-center transition-shadow hover:shadow-2xl`;
                
                // Safely read the programTitle, defaulting to the patient name for old programs
                const displayTitle = program.programTitle || program.patientName; 
                
                card.innerHTML = `
                    <div class="flex-grow mb-4 sm:mb-0">
                                                <h3 class="text-xl font-extrabold text-orange-400">${displayTitle}</h3> 
                        <h4 class="text-lg font-medium text-gray-200">Patient: ${program.patientName}</h4>
                        <p class="text-sm text-gray-400 mt-1">
                            ${program.exercises.length} Exercises prescribed on ${date} at ${time}
                        </p>
                    </div>
                    <div class="space-x-2 flex-shrink-0">
                        <button data-program-id="${program.id}" class="view-program-btn px-3 py-1 bg-teal-600 text-white text-sm font-semibold rounded-lg hover:bg-teal-700 transition-colors">View Details</button>
                        <button data-program-id="${program.id}" class="delete-program-btn px-3 py-1 bg-red-600 text-white text-sm font-semibold rounded-lg hover:bg-red-700 transition-colors">Delete</button>
                    </div>
                `;
        }
        
        /**
         * Displays the details of a saved program in a modal.
         */
        window.viewProgramDetail = function(programId) {
            const program = patientPrograms.find(p => p.id === programId);
            if (!program) {
                showMessage("Error", "Program not found.");
                return;
            }

            const detailModal = document.getElementById('detailModal');
            const patientName = document.getElementById('detailPatientName');
            const exercisesContainer = document.getElementById('detailProgramExercises');

            patientName.textContent = `HEP for: ${program.patientName}`;
            exercisesContainer.innerHTML = '';

            program.exercises.forEach(ex => {
                let borderClass = '';
                switch(ex.category) {
                    case 'Strength Training': borderClass = 'strength-border'; break;
                    case 'Stretching/Flexibility': borderClass = 'stretching-border'; break;
                    case 'Balance/Coordination': borderClass = 'balance-border'; break;
                    case 'Functional Exercise': borderClass = 'functional-border'; break;
                    case 'Motor Control': borderClass = 'motor-control-border'; break;
                    default: borderClass = 'border-gray-500';
                }

                const detailCard = document.createElement('div');
                detailCard.className = `bg-gray-700 p-4 rounded-lg shadow-md ${borderClass}`;
                detailCard.innerHTML = `
                    <h5 class="text-xl font-bold text-teal-300">${ex.name}</h5>
                    <p class="text-base text-gray-400">${ex.category} | **Prescription:** ${ex.customNotes || ex.setsReps}</p>
                    <p class="text-sm text-gray-300 mt-2">${ex.description}</p>
                `;
                exercisesContainer.appendChild(detailCard);
            });

            detailModal.classList.remove('hidden');
        };
        
        // --- MODAL & UI CONTROL FUNCTIONS ---
        
        /**
         * Generic function to display a message modal.
         */
        function showMessage(title, body) {
            document.getElementById('messageTitle').innerHTML = title;
            document.getElementById('messageBody').innerHTML = body;
            document.getElementById('messageBox').classList.remove('hidden');
        }

        /**
         * Switches the view between Exercise Library and Saved Programs.
         */
        function switchView(viewName) {
            const libraryView = document.getElementById('libraryView');
            const programsView = document.getElementById('programsView');
            const libraryBtn = document.getElementById('viewLibraryBtn');
            const programsBtn = document.getElementById('viewProgramsBtn');

            if (viewName === 'programs') {
                libraryView.classList.add('hidden');
                programsView.classList.remove('hidden');
                
                libraryBtn.classList.remove('bg-teal-600', 'text-white');
                libraryBtn.classList.add('text-gray-300', 'hover:bg-blue-700');
                
                programsBtn.classList.add('bg-orange-600', 'text-white');
                programsBtn.classList.remove('text-gray-300', 'hover:bg-blue-700');
                
                loadPrograms(); // Ensure programs list is fresh
            } else {
                programsView.classList.add('hidden');
                libraryView.classList.remove('hidden');
                
                programsBtn.classList.remove('bg-orange-600', 'text-white');
                programsBtn.classList.add('text-gray-300', 'hover:bg-blue-700');
                
                libraryBtn.classList.add('bg-teal-600', 'text-white');
                libraryBtn.classList.remove('text-gray-300', 'hover:bg-blue-700');
                
                renderExerciseLibrary(currentExercises); // Re-render library
            }
        }
        
        /**
         * Deletes a program from LocalStorage.
         */
        window.deleteProgram = function (programId) {
            const confirmation = prompt(`Type 'DELETE' to confirm removing this program forever:`);
            if (confirmation !== 'DELETE') {
                showMessage("Cancelled", "Program deletion cancelled.");
                return;
            }

            const initialLength = patientPrograms.length;
            patientPrograms = patientPrograms.filter(p => p.id !== programId);

            if (patientPrograms.length < initialLength) {
                saveProgramsToLocalStorage(); // Save the new, filtered list
                showMessage("Deleted", "Program successfully deleted.");
                renderProgramsList(); // Re-render the list
            } else {
                showMessage("Error", "Failed to find program to delete.");
            }
        }

        // --- INITIALIZATION ---
        document.addEventListener('DOMContentLoaded', () => {
            // Initial render of the exercise library
            renderExerciseLibrary();
            renderHEPPad(); // Render the empty pad

            // Attach event listeners for modals and buttons
            document.getElementById('messageCloseBtn').addEventListener('click', () => {
                document.getElementById('messageBox').classList.add('hidden');
            });

            document.getElementById('detailCloseBtn').addEventListener('click', () => {
                document.getElementById('detailModal').classList.add('hidden');
            });
            
            // Attach event listener for the Generate/Save button
            document.getElementById('prescribeButton').addEventListener('click', window.saveProgram);
            
            // Attach event listeners for view switching
            document.getElementById('viewLibraryBtn').addEventListener('click', () => switchView('library'));
            document.getElementById('viewProgramsBtn').addEventListener('click', () => switchView('programs'));
            
            // Scroll button for mobile/large library views
            document.getElementById('jumpToBottom').addEventListener('click', () => {
                window.scrollTo({
                    top: document.body.scrollHeight,
                    behavior: 'smooth'
                });
            });
        });
        
    </script>

</body>
</html>